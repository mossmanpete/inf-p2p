!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/inf-p2p/",n(n.s=18)}([function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n(3),i=n(1),o=n(5);function s(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}Object.assign(s.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new o.a;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new o.a;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,o=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,o=t.y,s=t.z,a=t.w,u=a*e+o*r-s*n,h=a*n+s*e-i*r,c=a*r+i*n-o*e,l=-i*e-o*n-s*r;return this.x=u*a+l*-i+h*-s-c*-o,this.y=h*a+l*-o+c*-i-u*-s,this.z=c*a+l*-s+u*-o-h*-i,this},project:function(){var t=new i.a;return function(e){return t.multiplyMatrices(e.projectionMatrix,t.getInverse(e.matrixWorld)),this.applyMatrix4(t)}}(),unproject:function(){var t=new i.a;return function(e){return t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyMatrix4(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(){var t=new s,e=new s;return function(n,r){return t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,o=e.x,s=e.y,a=e.z;return this.x=r*a-i*s,this.y=i*o-n*a,this.z=n*s-r*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new s;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new s;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(r.a.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){var e=Math.sin(t.phi)*t.radius;return this.x=e*Math.sin(t.theta),this.y=Math.cos(t.phi)*t.radius,this.z=e*Math.cos(t.theta),this},setFromCylindrical:function(t){return this.x=t.radius*Math.sin(t.theta),this.y=t.y,this.z=t.radius*Math.cos(t.theta),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0);function i(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}Object.assign(i.prototype,{isMatrix4:!0,set:function(t,e,n,r,i,o,s,a,u,h,c,l,f,d,p,m){var y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=i,y[5]=o,y[9]=s,y[13]=a,y[2]=u,y[6]=h,y[10]=c,y[14]=l,y[3]=f,y[7]=d,y[11]=p,y[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new i).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new r.a;return function(e){var n=this.elements,r=e.elements,i=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),s=1/t.setFromMatrixColumn(e,2).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[3]=0,n[4]=r[4]*o,n[5]=r[5]*o,n[6]=r[6]*o,n[7]=0,n[8]=r[8]*s,n[9]=r[9]*s,n[10]=r[10]*s,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,o=Math.cos(n),s=Math.sin(n),a=Math.cos(r),u=Math.sin(r),h=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var l=o*h,f=o*c,d=s*h,p=s*c;e[0]=a*h,e[4]=-a*c,e[8]=u,e[1]=f+d*u,e[5]=l-p*u,e[9]=-s*a,e[2]=p-l*u,e[6]=d+f*u,e[10]=o*a}else if("YXZ"===t.order){var m=a*h,y=a*c,v=u*h,g=u*c;e[0]=m+g*s,e[4]=v*s-y,e[8]=o*u,e[1]=o*c,e[5]=o*h,e[9]=-s,e[2]=y*s-v,e[6]=g+m*s,e[10]=o*a}else if("ZXY"===t.order)m=a*h,y=a*c,v=u*h,g=u*c,e[0]=m-g*s,e[4]=-o*c,e[8]=v+y*s,e[1]=y+v*s,e[5]=o*h,e[9]=g-m*s,e[2]=-o*u,e[6]=s,e[10]=o*a;else if("ZYX"===t.order)l=o*h,f=o*c,d=s*h,p=s*c,e[0]=a*h,e[4]=d*u-f,e[8]=l*u+p,e[1]=a*c,e[5]=p*u+l,e[9]=f*u-d,e[2]=-u,e[6]=s*a,e[10]=o*a;else if("YZX"===t.order){var x=o*a,b=o*u,w=s*a,_=s*u;e[0]=a*h,e[4]=_-x*c,e[8]=w*c+b,e[1]=c,e[5]=o*h,e[9]=-s*h,e[2]=-u*h,e[6]=b*c+w,e[10]=x-_*c}else"XZY"===t.order&&(x=o*a,b=o*u,w=s*a,_=s*u,e[0]=a*h,e[4]=-c,e[8]=u*h,e[1]=x*c+_,e[5]=o*h,e[9]=b*c-w,e[2]=w*c-b,e[6]=s*h,e[10]=_*c+x);return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new r.a(0,0,0),e=new r.a(1,1,1);return function(n){return this.compose(t,n,e)}}(),lookAt:function(){var t=new r.a,e=new r.a,n=new r.a;return function(r,i,o){var s=this.elements;return n.subVectors(r,i),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),s[0]=t.x,s[4]=e.x,s[8]=n.x,s[1]=t.y,s[5]=e.y,s[9]=n.y,s[2]=t.z,s[6]=e.z,s[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[4],a=n[8],u=n[12],h=n[1],c=n[5],l=n[9],f=n[13],d=n[2],p=n[6],m=n[10],y=n[14],v=n[3],g=n[7],x=n[11],b=n[15],w=r[0],_=r[4],M=r[8],z=r[12],k=r[1],S=r[5],E=r[9],A=r[13],N=r[2],T=r[6],C=r[10],O=r[14],j=r[3],U=r[7],B=r[11],P=r[15];return i[0]=o*w+s*k+a*N+u*j,i[4]=o*_+s*S+a*T+u*U,i[8]=o*M+s*E+a*C+u*B,i[12]=o*z+s*A+a*O+u*P,i[1]=h*w+c*k+l*N+f*j,i[5]=h*_+c*S+l*T+f*U,i[9]=h*M+c*E+l*C+f*B,i[13]=h*z+c*A+l*O+f*P,i[2]=d*w+p*k+m*N+y*j,i[6]=d*_+p*S+m*T+y*U,i[10]=d*M+p*E+m*C+y*B,i[14]=d*z+p*A+m*O+y*P,i[3]=v*w+g*k+x*N+b*j,i[7]=v*_+g*S+x*T+b*U,i[11]=v*M+g*E+x*C+b*B,i[15]=v*z+g*A+x*O+b*P,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new r.a;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],o=t[1],s=t[5],a=t[9],u=t[13],h=t[2],c=t[6],l=t[10],f=t[14];return t[3]*(+i*a*c-r*u*c-i*s*l+n*u*l+r*s*f-n*a*f)+t[7]*(+e*a*f-e*u*l+i*o*l-r*o*f+r*u*h-i*a*h)+t[11]*(+e*u*c-e*s*f-i*o*c+n*o*f+i*s*h-n*u*h)+t[15]*(-r*s*h-e*a*c+e*s*l+r*o*c-n*o*l+n*a*h)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],o=r[1],s=r[2],a=r[3],u=r[4],h=r[5],c=r[6],l=r[7],f=r[8],d=r[9],p=r[10],m=r[11],y=r[12],v=r[13],g=r[14],x=r[15],b=d*g*l-v*p*l+v*c*m-h*g*m-d*c*x+h*p*x,w=y*p*l-f*g*l-y*c*m+u*g*m+f*c*x-u*p*x,_=f*v*l-y*d*l+y*h*m-u*v*m-f*h*x+u*d*x,M=y*d*c-f*v*c-y*h*p+u*v*p+f*h*g-u*d*g,z=i*b+o*w+s*_+a*M;if(0===z){var k="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(k);return console.warn(k),this.identity()}var S=1/z;return n[0]=b*S,n[1]=(v*p*a-d*g*a-v*s*m+o*g*m+d*s*x-o*p*x)*S,n[2]=(h*g*a-v*c*a+v*s*l-o*g*l-h*s*x+o*c*x)*S,n[3]=(d*c*a-h*p*a-d*s*l+o*p*l+h*s*m-o*c*m)*S,n[4]=w*S,n[5]=(f*g*a-y*p*a+y*s*m-i*g*m-f*s*x+i*p*x)*S,n[6]=(y*c*a-u*g*a-y*s*l+i*g*l+u*s*x-i*c*x)*S,n[7]=(u*p*a-f*c*a+f*s*l-i*p*l-u*s*m+i*c*m)*S,n[8]=_*S,n[9]=(y*d*a-f*v*a-y*o*m+i*v*m+f*o*x-i*d*x)*S,n[10]=(u*v*a-y*h*a+y*o*l-i*v*l-u*o*x+i*h*x)*S,n[11]=(f*h*a-u*d*a-f*o*l+i*d*l+u*o*m-i*h*m)*S,n[12]=M*S,n[13]=(f*v*s-y*d*s+y*o*p-i*v*p-f*o*g+i*d*g)*S,n[14]=(y*h*s-u*v*s-y*o*c+i*v*c+u*o*g-i*h*g)*S,n[15]=(u*d*s-f*h*s+f*o*c-i*d*c-u*o*p+i*h*p)*S,this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,o=t.x,s=t.y,a=t.z,u=i*o,h=i*s;return this.set(u*o+n,u*s-r*a,u*a+r*s,0,u*s+r*a,h*s+n,h*a-r*o,0,u*a-r*s,h*a+r*o,i*a*a+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var r=this.elements,i=e._x,o=e._y,s=e._z,a=e._w,u=i+i,h=o+o,c=s+s,l=i*u,f=i*h,d=i*c,p=o*h,m=o*c,y=s*c,v=a*u,g=a*h,x=a*c,b=n.x,w=n.y,_=n.z;return r[0]=(1-(p+y))*b,r[1]=(f+x)*b,r[2]=(d-g)*b,r[3]=0,r[4]=(f-x)*w,r[5]=(1-(l+y))*w,r[6]=(m+v)*w,r[7]=0,r[8]=(d+g)*_,r[9]=(m-v)*_,r[10]=(1-(l+p))*_,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this},decompose:function(){var t=new r.a,e=new i;return function(n,r,i){var o=this.elements,s=t.set(o[0],o[1],o[2]).length(),a=t.set(o[4],o[5],o[6]).length(),u=t.set(o[8],o[9],o[10]).length();this.determinant()<0&&(s=-s),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var h=1/s,c=1/a,l=1/u;return e.elements[0]*=h,e.elements[1]*=h,e.elements[2]*=h,e.elements[4]*=c,e.elements[5]*=c,e.elements[6]*=c,e.elements[8]*=l,e.elements[9]*=l,e.elements[10]*=l,r.setFromRotationMatrix(e),i.x=s,i.y=a,i.z=u,this}}(),makePerspective:function(t,e,n,r,i,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var s=this.elements,a=2*i/(e-t),u=2*i/(n-r),h=(e+t)/(e-t),c=(n+r)/(n-r),l=-(o+i)/(o-i),f=-2*o*i/(o-i);return s[0]=a,s[4]=0,s[8]=h,s[12]=0,s[1]=0,s[5]=u,s[9]=c,s[13]=0,s[2]=0,s[6]=0,s[10]=l,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this},makeOrthographic:function(t,e,n,r,i,o){var s=this.elements,a=1/(e-t),u=1/(n-r),h=1/(o-i),c=(e+t)*a,l=(n+r)*u,f=(o+i)*h;return s[0]=2*a,s[4]=0,s[8]=0,s[12]=-c,s[1]=0,s[5]=2*u,s[9]=0,s[13]=-l,s[2]=0,s[6]=0,s[10]=-2*h,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}})},function(t,e,n){"use strict";function r(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==r?r:1}Object.assign(r.prototype,{isVector4:!0,set:function(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*e+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*e+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*e+o[7]*n+o[11]*r+o[15]*i,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,r,i,o=t.elements,s=o[0],a=o[4],u=o[8],h=o[1],c=o[5],l=o[9],f=o[2],d=o[6],p=o[10];if(Math.abs(a-h)<.01&&Math.abs(u-f)<.01&&Math.abs(l-d)<.01){if(Math.abs(a+h)<.1&&Math.abs(u+f)<.1&&Math.abs(l+d)<.1&&Math.abs(s+c+p-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(s+1)/2,y=(c+1)/2,v=(p+1)/2,g=(a+h)/4,x=(u+f)/4,b=(l+d)/4;return m>y&&m>v?m<.01?(n=0,r=.707106781,i=.707106781):(r=g/(n=Math.sqrt(m)),i=x/n):y>v?y<.01?(n=.707106781,r=0,i=.707106781):(n=g/(r=Math.sqrt(y)),i=b/r):v<.01?(n=.707106781,r=.707106781,i=0):(n=x/(i=Math.sqrt(v)),r=b/i),this.set(n,r,i,e),this}var w=Math.sqrt((d-l)*(d-l)+(u-f)*(u-f)+(h-a)*(h-a));return Math.abs(w)<.001&&(w=1),this.x=(d-l)/w,this.y=(u-f)/w,this.z=(h-a)/w,this.w=Math.acos((s+c+p-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new r,e=new r),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}});var i=n(0),o=n(6),s=n(12);function a(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function u(t,e,n){a.call(this,new Int8Array(t),e,n)}function h(t,e,n){a.call(this,new Uint8Array(t),e,n)}function c(t,e,n){a.call(this,new Uint8ClampedArray(t),e,n)}function l(t,e,n){a.call(this,new Int16Array(t),e,n)}function f(t,e,n){a.call(this,new Uint16Array(t),e,n)}function d(t,e,n){a.call(this,new Int32Array(t),e,n)}function p(t,e,n){a.call(this,new Uint32Array(t),e,n)}function m(t,e,n){a.call(this,new Float32Array(t),e,n)}function y(t,e,n){a.call(this,new Float64Array(t),e,n)}n.d(e,"b",function(){return m}),n.d(e,"d",function(){return p}),n.d(e,"c",function(){return f}),n.d(e,"a",function(){return a}),Object.defineProperty(a.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(a.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var r=0,i=this.itemSize;r<i;r++)this.array[t+r]=e.array[n+r];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var o=t[r];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",r),o=new s.a),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,r=0,i=t.length;r<i;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),s=new o.a),e[n++]=s.x,e[n++]=s.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,r=0,o=t.length;r<o;r++){var s=t[r];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",r),s=new i.a),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,o=t.length;i<o;i++){var s=t[i];void 0===s&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),s=new r),e[n++]=s.x,e[n++]=s.y,e[n++]=s.z,e[n++]=s.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this},setXYZW:function(t,e,n,r,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=i,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),u.prototype=Object.create(a.prototype),u.prototype.constructor=u,h.prototype=Object.create(a.prototype),h.prototype.constructor=h,c.prototype=Object.create(a.prototype),c.prototype.constructor=c,l.prototype=Object.create(a.prototype),l.prototype.constructor=l,f.prototype=Object.create(a.prototype),f.prototype.constructor=f,d.prototype=Object.create(a.prototype),d.prototype.constructor=d,p.prototype=Object.create(a.prototype),p.prototype.constructor=p,m.prototype=Object.create(a.prototype),m.prototype.constructor=m,y.prototype=Object.create(a.prototype),y.prototype.constructor=y},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&r|128]+t[r>>8&255]+"-"+t[r>>16&255]+t[r>>24&255]+t[255&i]+t[i>>8&255]+t[i>>16&255]+t[i>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*r.DEG2RAD},radToDeg:function(t){return t*r.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}}},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),i=n(0);function o(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1}Object.assign(o,{slerp:function(t,e,n,r){return n.copy(t).slerp(e,r)},slerpFlat:function(t,e,n,r,i,o,s){var a=n[r+0],u=n[r+1],h=n[r+2],c=n[r+3],l=i[o+0],f=i[o+1],d=i[o+2],p=i[o+3];if(c!==p||a!==l||u!==f||h!==d){var m=1-s,y=a*l+u*f+h*d+c*p,v=y>=0?1:-1,g=1-y*y;if(g>Number.EPSILON){var x=Math.sqrt(g),b=Math.atan2(x,y*v);m=Math.sin(m*b)/x,s=Math.sin(s*b)/x}var w=s*v;if(a=a*m+l*w,u=u*m+f*w,h=h*m+d*w,c=c*m+p*w,m===1-s){var _=1/Math.sqrt(a*a+u*u+h*h+c*c);a*=_,u*=_,h*=_,c*=_}}t[e]=a,t[e+1]=u,t[e+2]=h,t[e+3]=c}}),Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(o.prototype,{set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,r=t._y,i=t._z,o=t.order,s=Math.cos,a=Math.sin,u=s(n/2),h=s(r/2),c=s(i/2),l=a(n/2),f=a(r/2),d=a(i/2);return"XYZ"===o?(this._x=l*h*c+u*f*d,this._y=u*f*c-l*h*d,this._z=u*h*d+l*f*c,this._w=u*h*c-l*f*d):"YXZ"===o?(this._x=l*h*c+u*f*d,this._y=u*f*c-l*h*d,this._z=u*h*d-l*f*c,this._w=u*h*c+l*f*d):"ZXY"===o?(this._x=l*h*c-u*f*d,this._y=u*f*c+l*h*d,this._z=u*h*d+l*f*c,this._w=u*h*c-l*f*d):"ZYX"===o?(this._x=l*h*c-u*f*d,this._y=u*f*c+l*h*d,this._z=u*h*d-l*f*c,this._w=u*h*c+l*f*d):"YZX"===o?(this._x=l*h*c+u*f*d,this._y=u*f*c+l*h*d,this._z=u*h*d-l*f*c,this._w=u*h*c-l*f*d):"XZY"===o&&(this._x=l*h*c-u*f*d,this._y=u*f*c-l*h*d,this._z=u*h*d+l*f*c,this._w=u*h*c+l*f*d),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],o=n[8],s=n[1],a=n[5],u=n[9],h=n[2],c=n[6],l=n[10],f=r+a+l;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-u)*e,this._y=(o-h)*e,this._z=(s-i)*e):r>a&&r>l?(e=2*Math.sqrt(1+r-a-l),this._w=(c-u)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(o+h)/e):a>l?(e=2*Math.sqrt(1+a-r-l),this._w=(o-h)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(u+c)/e):(e=2*Math.sqrt(1+l-r-a),this._w=(s-i)/e,this._x=(o+h)/e,this._y=(u+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(){var t,e=new i.a;return function(n,r){return void 0===e&&(e=new i.a),(t=n.dot(r)+1)<1e-6?(t=0,Math.abs(n.x)>Math.abs(n.z)?e.set(-n.y,n.x,0):e.set(0,-n.z,n.y)):e.crossVectors(n,r),this._x=e.x,this._y=e.y,this._z=e.z,this._w=t,this.normalize()}}(),angleTo:function(t){return 2*Math.acos(Math.abs(r.a.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var r=Math.min(1,e/n);return this.slerp(t,r),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,o=t._w,s=e._x,a=e._y,u=e._z,h=e._w;return this._x=n*h+o*s+r*u-i*a,this._y=r*h+o*a+i*s-n*u,this._z=i*h+o*u+n*a-r*s,this._w=o*h-n*s-r*a-i*u,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,o=this._w,s=o*t._w+n*t._x+r*t._y+i*t._z;if(s<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,s=-s):this.copy(t),s>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;var a=1-s*s;if(a<=Number.EPSILON){var u=1-e;return this._w=u*o+e*this._w,this._x=u*n+e*this._x,this._y=u*r+e*this._y,this._z=u*i+e*this._z,this.normalize()}var h=Math.sqrt(a),c=Math.atan2(h,s),l=Math.sin((1-e)*c)/h,f=Math.sin(e*c)/h;return this._w=o*l+this._w*f,this._x=n*l+this._x*f,this._y=r*l+this._y*f,this._z=i*l+this._z*f,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}})},function(t,e,n){"use strict";function r(t,e){this.x=t||0,this.y=e||0}n.d(e,"a",function(){return r}),Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(r.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(){var t=new r,e=new r;return function(n,r){return t.set(n,n),e.set(r,r),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=this.x-t.x,o=this.y-t.y;return this.x=i*n-o*r+t.x,this.y=i*r+o*n+t.y,this}})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0),i=n(13);function o(t,e){this.min=void 0!==t?t:new r.a(1/0,1/0,1/0),this.max=void 0!==e?e:new r.a(-1/0,-1/0,-1/0)}Object.assign(o.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0,a=0,u=t.length;a<u;a+=3){var h=t[a],c=t[a+1],l=t[a+2];h<e&&(e=h),c<n&&(n=c),l<r&&(r=l),h>i&&(i=h),c>o&&(o=c),l>s&&(s=l)}return this.min.set(e,n,r),this.max.set(i,o,s),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,r=1/0,i=-1/0,o=-1/0,s=-1/0,a=0,u=t.count;a<u;a++){var h=t.getX(a),c=t.getY(a),l=t.getZ(a);h<e&&(e=h),c<n&&(n=c),l<r&&(r=l),h>i&&(i=h),c>o&&(o=c),l>s&&(s=l)}return this.min.set(e,n,r),this.max.set(i,o,s),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r.a;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new r.a),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new r.a),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,n,i=new r.a;function o(r){var o=r.geometry;if(void 0!==o)if(o.isGeometry){var s=o.vertices;for(e=0,n=s.length;e<n;e++)i.copy(s[e]),i.applyMatrix4(r.matrixWorld),t.expandByPoint(i)}else if(o.isBufferGeometry){var a=o.attributes.position;if(void 0!==a)for(e=0,n=a.count;e<n;e++)i.fromBufferAttribute(a,e).applyMatrix4(r.matrixWorld),t.expandByPoint(i)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(o),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new r.a),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new r.a;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=t.constant&&n>=t.constant},intersectsTriangle:function(){var t=new r.a,e=new r.a,n=new r.a,i=new r.a,o=new r.a,s=new r.a,a=new r.a,u=new r.a,h=new r.a,c=new r.a;function l(r){var i,o;for(i=0,o=r.length-3;i<=o;i+=3){a.fromArray(r,i);var s=h.x*Math.abs(a.x)+h.y*Math.abs(a.y)+h.z*Math.abs(a.z),u=t.dot(a),c=e.dot(a),l=n.dot(a);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}return function(r){if(this.isEmpty())return!1;this.getCenter(u),h.subVectors(this.max,u),t.subVectors(r.a,u),e.subVectors(r.b,u),n.subVectors(r.c,u),i.subVectors(e,t),o.subVectors(n,e),s.subVectors(t,n);var a=[0,-i.z,i.y,0,-o.z,o.y,0,-s.z,s.y,i.z,0,-i.x,o.z,0,-o.x,s.z,0,-s.x,-i.y,i.x,0,-o.y,o.x,0,-s.y,s.x,0];return!!l(a)&&!!l(a=[1,0,0,0,1,0,0,0,1])&&(c.crossVectors(i,o),l(a=[c.x,c.y,c.z]))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new r.a),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r.a;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new r.a;return function(e){return void 0===e&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),e=new i.a),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){if(this.isEmpty())return this;var e=t.elements,n=e[0]*this.min.x,r=e[1]*this.min.x,i=e[2]*this.min.x,o=e[0]*this.max.x,s=e[1]*this.max.x,a=e[2]*this.max.x,u=e[4]*this.min.y,h=e[5]*this.min.y,c=e[6]*this.min.y,l=e[4]*this.max.y,f=e[5]*this.max.y,d=e[6]*this.max.y,p=e[8]*this.min.z,m=e[9]*this.min.z,y=e[10]*this.min.z,v=e[8]*this.max.z,g=e[9]*this.max.z,x=e[10]*this.max.z;return this.min.x=Math.min(n,o)+Math.min(u,l)+Math.min(p,v)+e[12],this.min.y=Math.min(r,s)+Math.min(h,f)+Math.min(m,g)+e[13],this.min.z=Math.min(i,a)+Math.min(c,d)+Math.min(y,x)+e[14],this.max.x=Math.max(n,o)+Math.max(u,l)+Math.max(p,v)+e[12],this.max.y=Math.max(r,s)+Math.max(h,f)+Math.max(m,g)+e[13],this.max.z=Math.max(i,a)+Math.max(c,d)+Math.max(y,x)+e[14],this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}})},function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n(0);function i(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.assign(i.prototype,{isMatrix3:!0,set:function(t,e,n,r,i,o,s,a,u){var h=this.elements;return h[0]=t,h[1]=r,h[2]=s,h[3]=e,h[4]=i,h[5]=a,h[6]=n,h[7]=o,h[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new r.a;return function(e){for(var n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,o=n[0],s=n[3],a=n[6],u=n[1],h=n[4],c=n[7],l=n[2],f=n[5],d=n[8],p=r[0],m=r[3],y=r[6],v=r[1],g=r[4],x=r[7],b=r[2],w=r[5],_=r[8];return i[0]=o*p+s*v+a*b,i[3]=o*m+s*g+a*w,i[6]=o*y+s*x+a*_,i[1]=u*p+h*v+c*b,i[4]=u*m+h*g+c*w,i[7]=u*y+h*x+c*_,i[2]=l*p+f*v+d*b,i[5]=l*m+f*g+d*w,i[8]=l*y+f*x+d*_,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],s=t[5],a=t[6],u=t[7],h=t[8];return e*o*h-e*s*u-n*i*h+n*s*a+r*i*u-r*o*a},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,r=this.elements,i=n[0],o=n[1],s=n[2],a=n[3],u=n[4],h=n[5],c=n[6],l=n[7],f=n[8],d=f*u-h*l,p=h*c-f*a,m=l*a-u*c,y=i*d+o*p+s*m;if(0===y){var v="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(v);return console.warn(v),this.identity()}var g=1/y;return r[0]=d*g,r[1]=(s*l-f*o)*g,r[2]=(h*o-s*u)*g,r[3]=p*g,r[4]=(f*i-s*c)*g,r[5]=(s*a-h*i)*g,r[6]=m*g,r[7]=(o*c-l*i)*g,r[8]=(u*i-o*a)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,r,i,o,s){var a=Math.cos(i),u=Math.sin(i);this.set(n*a,n*u,-n*(a*o+u*s)+o+t,-r*u,r*a,-r*(-u*o+a*s)+s+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),r=this.elements,i=r[0],o=r[3],s=r[6],a=r[1],u=r[4],h=r[7];return r[0]=e*i+n*a,r[3]=e*o+n*u,r[6]=e*s+n*h,r[1]=-n*i+e*a,r[4]=-n*o+e*u,r[7]=-n*s+e*h,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}})},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,n){"use strict";function r(){}n.d(e,"a",function(){return r}),Object.assign(r.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),r=0,i=n.length;r<i;r++)n[r].call(this,t)}}}})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(3),i={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function o(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}Object.assign(o.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){if(e=r.a.euclideanModulo(e,1),n=r.a.clamp(n,0,1),i=r.a.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var o=i<=.5?i*(1+n):i+n-i*n,s=2*i-o;this.r=t(s,o,e+1/3),this.g=t(s,o,e),this.b=t(s,o,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var r,o=n[1],s=n[2];switch(o){case"rgb":case"rgba":if(r=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,e(r[5]),this;if(r=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,e(r[5]),this;break;case"hsl":case"hsla":if(r=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(s)){var a=parseFloat(r[1])/360,u=parseInt(r[2],10)/100,h=parseInt(r[3],10)/100;return e(r[5]),this.setHSL(a,u,h)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c,l=(c=n[1]).length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0&&(void 0!==(c=i[t])?this.setHex(c):console.warn("THREE.Color: Unknown color "+t)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,r=this.r,i=this.g,o=this.b,s=Math.max(r,i,o),a=Math.min(r,i,o),u=(a+s)/2;if(a===s)e=0,n=0;else{var h=s-a;switch(n=u<=.5?h/(s+a):h/(2-s-a),s){case r:e=(i-o)/h+(i<o?6:0);break;case i:e=(o-r)/h+2;break;case o:e=(r-i)/h+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,n,r){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=r,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}})},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(7),i=n(0);function o(t,e){this.center=void 0!==t?t:new i.a,this.radius=void 0!==e?e:0}Object.assign(o.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new r.a;return function(e,n){var r=this.center;void 0!==n?r.copy(n):t.setFromPoints(e).getCenter(r);for(var i=0,o=0,s=e.length;o<s;o++)i=Math.max(i,r.distanceToSquared(e[o]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new i.a),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new r.a),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}})},function(t,e,n){"use strict";n.r(e);var r=n(0),i=n(7),o=n(11),s=n(2),a=n(13),u=n(6);function h(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}Object.assign(h.prototype,{computeGroups:function(t){for(var e,n=[],r=void 0,i=t.faces,o=0;o<i.length;o++){var s=i[o];s.materialIndex!==r&&(r=s.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:r})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,r=t.vertices,i=t.faceVertexUvs,o=i[0]&&i[0].length>0,s=i[1]&&i[1].length>0,a=t.morphTargets,h=a.length;if(h>0){e=[];for(var c=0;c<h;c++)e[c]=[];this.morphTargets.position=e}var l,f=t.morphNormals,d=f.length;if(d>0){for(l=[],c=0;c<d;c++)l[c]=[];this.morphTargets.normal=l}var p=t.skinIndices,m=t.skinWeights,y=p.length===r.length,v=m.length===r.length;for(r.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported."),c=0;c<n.length;c++){var g=n[c];this.vertices.push(r[g.a],r[g.b],r[g.c]);var x=g.vertexNormals;if(3===x.length)this.normals.push(x[0],x[1],x[2]);else{var b=g.normal;this.normals.push(b,b,b)}var w,_=g.vertexColors;if(3===_.length)this.colors.push(_[0],_[1],_[2]);else{var M=g.color;this.colors.push(M,M,M)}!0===o&&(void 0!==(w=i[0][c])?this.uvs.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new u.a,new u.a,new u.a))),!0===s&&(void 0!==(w=i[1][c])?this.uvs2.push(w[0],w[1],w[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new u.a,new u.a,new u.a)));for(var z=0;z<h;z++){var k=a[z].vertices;e[z].push(k[g.a],k[g.b],k[g.c])}for(z=0;z<d;z++){var S=f[z].vertexNormals[c];l[z].push(S.a,S.b,S.c)}y&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(m[g.a],m[g.b],m[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var c=n(15),l=n(1),f=n(8),d=n(3);n.d(e,"BufferGeometry",function(){return m});var p=1;function m(){Object.defineProperty(this,"id",{value:p+=2}),this.uuid=d.a.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}m.prototype=Object.assign(Object.create(o.a.prototype),{constructor:m,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(function(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,r=t.length;n<r;++n)t[n]>e&&(e=t[n]);return e}(t)>65535?s.d:s.c)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new s.a(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;return void 0!==n&&((new f.a).getNormalMatrix(t).applyToBufferAttribute(n),n.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new l.a;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new l.a;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new l.a;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new l.a;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new l.a;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new c.a;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new r.a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new s.b(3*e.vertices.length,3),r=new s.b(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",r.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var i=new s.b(e.lineDistances.length,1);this.addAttribute("lineDistance",i.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.push(i.x,i.y,i.z||0)}return this.addAttribute("position",new s.b(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var r=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(r=void 0,n.elementsNeedUpdate=!1),void 0===r)return this.fromGeometry(n);r.verticesNeedUpdate=n.verticesNeedUpdate,r.normalsNeedUpdate=n.normalsNeedUpdate,r.colorsNeedUpdate=n.colorsNeedUpdate,r.uvsNeedUpdate=n.uvsNeedUpdate,r.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=r}return!0===n.verticesNeedUpdate&&(void 0!==(e=this.attributes.position)&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(void 0!==(e=this.attributes.normal)&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(void 0!==(e=this.attributes.color)&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(void 0!==(e=this.attributes.uv)&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(void 0!==(e=this.attributes.lineDistance)&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new h).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new s.a(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new s.a(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var r=new Float32Array(3*t.colors.length);this.addAttribute("color",new s.a(r,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var i=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new s.a(i,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new s.a(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var u=[],h=t.morphTargets[a],c=0,l=h.length;c<l;c++){var f=h[c],d=new s.b(3*f.length,3);u.push(d.copyVector3sArray(f))}this.morphAttributes[a]=u}if(t.skinIndices.length>0){var p=new s.b(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var m=new s.b(4*t.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new i.a);var t=this.attributes.position;void 0!==t?this.boundingBox.setFromBufferAttribute(t):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var t=new i.a,e=new r.a;return function(){null===this.boundingSphere&&(this.boundingSphere=new a.a);var n=this.attributes.position;if(n){var r=this.boundingSphere.center;t.setFromBufferAttribute(n),t.getCenter(r);for(var i=0,o=0,s=n.count;o<s;o++)e.x=n.getX(o),e.y=n.getY(o),e.z=n.getZ(o),i=Math.max(i,r.distanceToSquared(e));this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes,n=this.groups;if(e.position){var i=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new s.a(new Float32Array(i.length),3));else for(var o=e.normal.array,a=0,u=o.length;a<u;a++)o[a]=0;var h,c,l,f=e.normal.array,d=new r.a,p=new r.a,m=new r.a,y=new r.a,v=new r.a;if(t){var g=t.array;0===n.length&&this.addGroup(0,g.length);for(var x=0,b=n.length;x<b;++x){var w=n[x],_=w.start;for(a=_,u=_+w.count;a<u;a+=3)h=3*g[a+0],c=3*g[a+1],l=3*g[a+2],d.fromArray(i,h),p.fromArray(i,c),m.fromArray(i,l),y.subVectors(m,p),v.subVectors(d,p),y.cross(v),f[h]+=y.x,f[h+1]+=y.y,f[h+2]+=y.z,f[c]+=y.x,f[c+1]+=y.y,f[c+2]+=y.z,f[l]+=y.x,f[l+1]+=y.y,f[l+2]+=y.z}}else for(a=0,u=i.length;a<u;a+=9)d.fromArray(i,a),p.fromArray(i,a+3),m.fromArray(i,a+6),y.subVectors(m,p),v.subVectors(d,p),y.cross(v),f[a]=y.x,f[a+1]=y.y,f[a+2]=y.z,f[a+3]=y.x,f[a+4]=y.y,f[a+5]=y.z,f[a+6]=y.x,f[a+7]=y.y,f[a+8]=y.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var r in n)if(void 0!==t.attributes[r])for(var i=n[r].array,o=t.attributes[r],s=o.array,a=0,u=o.itemSize*e;a<s.length;a++,u++)i[u]=s[a];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new r.a;return function(){for(var e=this.attributes.normal,n=0,r=e.count;n<r;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var t=new m,e=this.index.array,n=this.attributes;for(var r in n){for(var i=n[r],o=i.array,a=i.itemSize,u=new o.constructor(e.length*a),h=0,c=0,l=0,f=e.length;l<f;l++){h=e[l]*a;for(var d=0;d<a;d++)u[c++]=o[h++]}t.addAttribute(r,new s.a(u,a))}var p=this.groups;for(l=0,f=p.length;l<f;l++){var y=p[l];t.addGroup(y.start,y.count,y.materialIndex)}return t},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var r=this.index;if(null!==r){var i=Array.prototype.slice.call(r.array);t.data.index={type:r.array.constructor.name,array:i}}var o=this.attributes;for(var n in o){var s=o[n];i=Array.prototype.slice.call(s.array),t.data.attributes[n]={itemSize:s.itemSize,type:s.array.constructor.name,array:i,normalized:s.normalized}}var a=this.groups;a.length>0&&(t.data.groups=JSON.parse(JSON.stringify(a)));var u=this.boundingSphere;return null!==u&&(t.data.boundingSphere={center:u.center.toArray(),radius:u.radius}),t},clone:function(){return(new m).copy(this)},copy:function(t){var e,n,r;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var i=t.index;null!==i&&this.setIndex(i.clone());var o=t.attributes;for(e in o){var s=o[e];this.addAttribute(e,s.clone())}var a=t.morphAttributes;for(e in a){var u=[],h=a[e];for(n=0,r=h.length;n<r;n++)u.push(h[n].clone());this.morphAttributes[e]=u}var c=t.groups;for(n=0,r=c.length;n<r;n++){var l=c[n];this.addGroup(l.start,l.count,l.materialIndex)}var f=t.boundingBox;null!==f&&(this.boundingBox=f.clone());var d=t.boundingSphere;return null!==d&&(this.boundingSphere=d.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}})},function(t,e,n){"use strict";var r=n(5),i=n(0),o=n(1),s=n(11),a=n(3);function u(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._order=r||u.DefaultOrder}function h(){this.mask=1}u.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],u.DefaultOrder="XYZ",Object.defineProperties(u.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(u.prototype,{isEuler:!0,set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._order=r||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var r=a.a.clamp,i=t.elements,o=i[0],s=i[4],u=i[8],h=i[1],c=i[5],l=i[9],f=i[2],d=i[6],p=i[10];return"XYZ"===(e=e||this._order)?(this._y=Math.asin(r(u,-1,1)),Math.abs(u)<.99999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-s,o)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-r(l,-1,1)),Math.abs(l)<.99999?(this._y=Math.atan2(u,p),this._z=Math.atan2(h,c)):(this._y=Math.atan2(-f,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(r(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-f,p),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(h,o))):"ZYX"===e?(this._y=Math.asin(-r(f,-1,1)),Math.abs(f)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(h,o)):(this._x=0,this._z=Math.atan2(-s,c))):"YZX"===e?(this._z=Math.asin(r(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-f,o)):(this._x=0,this._y=Math.atan2(u,p))):"XZY"===e?(this._z=Math.asin(-r(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(u,o)):(this._x=Math.atan2(-l,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new o.a;return function(e,n,r){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,r)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new r.a;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new i.a(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(h.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var c=n(8);n.d(e,"a",function(){return f});var l=0;function f(){Object.defineProperty(this,"id",{value:l++}),this.uuid=a.a.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=f.DefaultUp.clone();var t=new i.a,e=new u,n=new r.a,s=new i.a(1,1,1);e.onChange(function(){n.setFromEuler(e,!1)}),n.onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:e},quaternion:{enumerable:!0,value:n},scale:{enumerable:!0,value:s},modelViewMatrix:{value:new o.a},normalMatrix:{value:new c.a}}),this.matrix=new o.a,this.matrixWorld=new o.a,this.matrixAutoUpdate=f.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new h,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}f.DefaultUp=new i.a(0,1,0),f.DefaultMatrixAutoUpdate=!0,f.prototype=Object.assign(Object.create(s.a.prototype),{constructor:f,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrix.multiplyMatrices(t,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new r.a;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new r.a;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new i.a(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new i.a(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new i.a(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new i.a;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new i.a(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new i.a(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new i.a(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new o.a;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new o.a,e=new i.a;return function(n,r,i){n.isVector3?e.copy(n):e.set(n,r,i),this.isCamera?t.lookAt(this.position,e,this.up):t.lookAt(e,this.position,this.up),this.quaternion.setFromRotationMatrix(t)}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,r=this.children.length;n<r;n++){var i=this.children[n].getObjectByProperty(t,e);if(void 0!==i)return i}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new i.a),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new i.a,e=new i.a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new r.a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new i.a,e=new r.a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new i.a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(){var t=new r.a;return function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),e=new i.a),this.getWorldQuaternion(t),e.set(0,0,1).applyQuaternion(t)}}(),raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,r=e.length;n<r;n++)e[n].updateMatrixWorld(t)},toJSON:function(t){var e=void 0===t||"string"==typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};function i(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isMesh||this.isLine||this.isPoints){r.geometry=i(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var a=0,u=s.length;a<u;a++){var h=s[a];i(t.shapes,h)}else i(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){var c=[];for(a=0,u=this.material.length;a<u;a++)c.push(i(t.materials,this.material[a]));r.material=c}else r.material=i(t.materials,this.material);if(this.children.length>0)for(r.children=[],a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(t).object);if(e){var l=m(t.geometries),f=m(t.materials),d=m(t.textures),p=m(t.images);s=m(t.shapes),l.length>0&&(n.geometries=l),f.length>0&&(n.materials=f),d.length>0&&(n.textures=d),p.length>0&&(n.images=p),s.length>0&&(n.shapes=s)}return n.object=r,n;function m(t){var e=[];for(var n in t){var r=t[n];delete r.metadata,e.push(r)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var r=t.children[n];this.add(r.clone())}return this}})},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SEGMENT_SIZE=e.CHUNK_SEGMENTS=void 0,e.CHUNK_SEGMENTS=128,e.SEGMENT_SIZE=2},function(t,e,n){"use strict";var r=n(38),i=n(14),o=h(n(19)),s=n(24),a=h(n(36)),u=n(17);function h(t){return t&&t.__esModule?t:{default:t}}var c=new o.default("world1");self.onmessage=function(t){var e=t.data;switch(e.cmd){case"loadChunk":!function(t){var e=t.x,n=t.z;c.loadChunk(e,n).then(function(t){if(t&&t.terrain)return t.terrain;var r=(0,s.generateNoiseMap)(e,n);return c.saveChunk(e,n,r).then(function(){return r})}).then(function(t){var o=(0,a.default)(t);t=(0,s.generateHeightMap)(t);var h=new r.PlaneGeometry(u.CHUNK_SEGMENTS*u.SEGMENT_SIZE,u.CHUNK_SEGMENTS*u.SEGMENT_SIZE,u.CHUNK_SEGMENTS-1,u.CHUNK_SEGMENTS-1);h.rotateX(-Math.PI/2);for(var c=0;c<t.length;c++)h.vertices[c].y=t[c];for(var l=0;l<o.length;l++)h.faces[l].color.setHex(o[l]);h.computeVertexNormals();var f=(new i.BufferGeometry).fromGeometry(h),d=f.attributes,p=d.position,m=d.color,y=d.uv,v=d.normal;self.postMessage({cmd:"terrain",x:e,z:n,attributes:f.attributes},[p.array.buffer,m.array.buffer,y.array.buffer,v.array.buffer])})}(e);break;case"clearCache":c.clear()}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(n(20));function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=e,this.version=n,this.db=new r.default("mapcache"),this.db.version(this.version).stores(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},"chunks-".concat(e),"[x+z],modified")),this.chunks=this.db["chunks-".concat(e)]}return function(t,e,n){e&&i(t.prototype,e)}(t,[{key:"saveChunk",value:function(t,e,n){return this.chunks.put({x:t,z:e,terrain:n,modified:Date.now()})}},{key:"loadChunk",value:function(t,e){return this.chunks.where({x:t,z:e}).toArray().then(function(t){return t.length?t[0]:null})}},{key:"clear",value:function(){return this.chunks.clear()}}]),t}();e.default=o},function(t,e,n){"use strict";n.r(e),function(t,n){var r=Object.keys,i=Array.isArray,o="undefined"!=typeof self?self:"undefined"!=typeof window?window:t;function s(t,e){return"object"!=typeof e?t:(r(e).forEach(function(n){t[n]=e[n]}),t)}var a=Object.getPrototypeOf,u={}.hasOwnProperty;function h(t,e){return u.call(t,e)}function c(t,e){"function"==typeof e&&(e=e(a(t))),r(e).forEach(function(n){f(t,n,e[n])})}var l=Object.defineProperty;function f(t,e,n,r){l(t,e,s(n&&h(n,"get")&&"function"==typeof n.get?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function d(t){return{from:function(e){return t.prototype=Object.create(e.prototype),f(t.prototype,"constructor",t),{extend:c.bind(null,t.prototype)}}}}var p=Object.getOwnPropertyDescriptor,m=[].slice;function y(t,e,n){return m.call(t,e,n)}function v(t,e){return e(t)}function g(t){if(!t)throw new Error("Assertion Failed")}function x(t){o.setImmediate?n(t):setTimeout(t,0)}function b(t,e){return t.reduce(function(t,n,r){var i=e(n,r);return i&&(t[i[0]]=i[1]),t},{})}function w(t,e,n){try{t.apply(null,n)}catch(t){e&&e(t)}}function _(t,e){if(h(t,e))return t[e];if(!e)return t;if("string"!=typeof e){for(var n=[],r=0,i=e.length;r<i;++r){var o=_(t,e[r]);n.push(o)}return n}var s=e.indexOf(".");if(-1!==s){var a=t[e.substr(0,s)];return void 0===a?void 0:_(a,e.substr(s+1))}}function M(t,e,n){if(t&&void 0!==e&&!("isFrozen"in Object&&Object.isFrozen(t)))if("string"!=typeof e&&"length"in e){g("string"!=typeof n&&"length"in n);for(var r=0,i=e.length;r<i;++r)M(t,e[r],n[r])}else{var o=e.indexOf(".");if(-1!==o){var s=e.substr(0,o),a=e.substr(o+1);if(""===a)void 0===n?delete t[s]:t[s]=n;else{var u=t[s];u||(u=t[s]={}),M(u,a,n)}}else void 0===n?delete t[e]:t[e]=n}}function z(t){var e={};for(var n in t)h(t,n)&&(e[n]=t[n]);return e}var k=[].concat;function S(t){return k.apply([],t)}var E="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(S([8,16,32,64].map(function(t){return["Int","Uint","Float"].map(function(e){return e+t+"Array"})}))).filter(function(t){return o[t]}).map(function(t){return o[t]});function A(t){if(!t||"object"!=typeof t)return t;var e;if(i(t)){e=[];for(var n=0,r=t.length;n<r;++n)e.push(A(t[n]))}else if(E.indexOf(t.constructor)>=0)e=t;else for(var o in e=t.constructor?Object.create(t.constructor.prototype):{},t)h(t,o)&&(e[o]=A(t[o]));return e}function N(t,e,n,i){return n=n||{},i=i||"",r(t).forEach(function(r){if(h(e,r)){var o=t[r],s=e[r];"object"==typeof o&&"object"==typeof s&&o&&s&&""+o.constructor==""+s.constructor?N(o,s,n,i+r+"."):o!==s&&(n[i+r]=e[r])}else n[i+r]=void 0}),r(e).forEach(function(r){h(t,r)||(n[i+r]=e[r])}),n}var T="undefined"!=typeof Symbol&&Symbol.iterator,C=T?function(t){var e;return null!=t&&(e=t[T])&&e.apply(t)}:function(){return null},O={};function j(t){var e,n,r,o;if(1===arguments.length){if(i(t))return t.slice();if(this===O&&"string"==typeof t)return[t];if(o=C(t)){for(n=[];!(r=o.next()).done;)n.push(r.value);return n}if(null==t)return[t];if("number"==typeof(e=t.length)){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}var U="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function B(t,e){U=t,P=e}var P=function(){return!0},I=!new Error("").stack;function D(){if(I)try{throw D.arguments,new Error}catch(t){return t}return new Error}function V(t,e){var n=t.stack;return n?(e=e||0,0===n.indexOf(t.name)&&(e+=(t.name+t.message).split("\n").length),n.split("\n").slice(e).filter(P).map(function(t){return"\n"+t}).join("")):""}var F=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],R=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(F),q={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function G(t,e){this._e=D(),this.name=t,this.message=e}function H(t,e,n,r){this._e=D(),this.failures=e,this.failedKeys=r,this.successCount=n}function K(t,e){this._e=D(),this.name="BulkError",this.failures=e,this.message=function(t,e){return t+". Errors: "+e.map(function(t){return t.toString()}).filter(function(t,e,n){return n.indexOf(t)===e}).join("\n")}(t,e)}d(G).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+V(this._e,2))}},toString:function(){return this.name+": "+this.message}}),d(H).from(G),d(K).from(G);var W=R.reduce(function(t,e){return t[e]=e+"Error",t},{}),L=G,X=R.reduce(function(t,e){var n=e+"Error";function r(t,r){this._e=D(),this.name=n,t?"string"==typeof t?(this.message=t,this.inner=r||null):"object"==typeof t&&(this.message=t.name+" "+t.message,this.inner=t):(this.message=q[e]||n,this.inner=null)}return d(r).from(L),t[e]=r,t},{});X.Syntax=SyntaxError,X.Type=TypeError,X.Range=RangeError;var Z=F.reduce(function(t,e){return t[e+"Error"]=X[e],t},{}),Y=R.reduce(function(t,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(t[e+"Error"]=X[e]),t},{});function Q(){}function J(t){return t}function $(t,e){return null==t||t===J?e:function(n){return e(t(n))}}function tt(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function et(t,e){return t===Q?e:function(){var n=t.apply(this,arguments);void 0!==n&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?tt(r,this.onsuccess):r),i&&(this.onerror=this.onerror?tt(i,this.onerror):i),void 0!==o?o:n}}function nt(t,e){return t===Q?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?tt(n,this.onsuccess):n),r&&(this.onerror=this.onerror?tt(r,this.onerror):r)}}function rt(t,e){return t===Q?e:function(n){var r=t.apply(this,arguments);s(n,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?tt(i,this.onsuccess):i),o&&(this.onerror=this.onerror?tt(o,this.onerror):o),void 0===r?void 0===a?void 0:a:s(r,a)}}function it(t,e){return t===Q?e:function(){return!1!==e.apply(this,arguments)&&t.apply(this,arguments)}}function ot(t,e){return t===Q?e:function(){var n=t.apply(this,arguments);if(n&&"function"==typeof n.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return n.then(function(){return e.apply(r,o)})}return e.apply(this,arguments)}}Y.ModifyError=H,Y.DexieError=G,Y.BulkError=K;var st={},at=100,ut=7,ht=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var t=o.Promise;return t?[t.resolve(),t.prototype,t.resolve()]:[]}}(),ct=ht[0],lt=ht[1],ft=ht[2],dt=lt&&lt.then,pt=ct&&ct.constructor,mt=ht[3],yt=!!ft,vt=!1,gt=ft?function(){ft.then(Vt)}:o.setImmediate?n.bind(null,Vt):o.MutationObserver?function(){var t=document.createElement("div");new MutationObserver(function(){Vt(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:function(){setTimeout(Vt,0)},xt=function(t,e){At.push([t,e]),wt&&(gt(),wt=!1)},bt=!0,wt=!0,_t=[],Mt=[],zt=null,kt=J,St={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ue,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(function(t){try{ue(t[0],t[1])}catch(t){}})}},Et=St,At=[],Nt=0,Tt=[];function Ct(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Q,this._lib=!1;var e=this._PSD=Et;if(U&&(this._stackHolder=D(),this._prev=null,this._numPrev=0),"function"!=typeof t){if(t!==st)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Ut(this,this._value))}this._state=null,this._value=null,++e.ref,function t(e,n){try{n(function(n){if(null===e._state){if(n===e)throw new TypeError("A promise cannot be resolved with itself.");var r=e._lib&&Ft();n&&"function"==typeof n.then?t(e,function(t,e){n instanceof Ct?n._then(t,e):n.then(t,e)}):(e._state=!0,e._value=n,Bt(e)),r&&Rt()}},Ut.bind(null,e))}catch(t){Ut(e,t)}}(this,t)}var Ot={get:function(){var t=Et,e=Zt;function n(n,r){var i=this,o=!t.global&&(t!==Et||e!==Zt);o&&$t();var s=new Ct(function(e,s){Pt(i,new jt(oe(n,t,o),oe(r,t,o),e,s,t))});return U&&Dt(s,this),s}return n.prototype=st,n},set:function(t){f(this,"then",t&&t.prototype===st?Ot:{get:function(){return t},set:Ot.set})}};function jt(t,e,n,r,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=r,this.psd=i}function Ut(t,e){if(Mt.push(e),null===t._state){var n=t._lib&&Ft();e=kt(e),t._state=!1,t._value=e,U&&null!==e&&"object"==typeof e&&!e._promise&&w(function(){var n=function t(e,n){var r;return p(e,n)||(r=a(e))&&t(r,n)}(e,"stack");e._promise=t,f(e,"stack",{get:function(){return vt?n&&(n.get?n.get.apply(e):n.value):t.stack}})}),function(t){_t.some(function(e){return e._value===t._value})||_t.push(t)}(t),Bt(t),n&&Rt()}}function Bt(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Pt(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),0===Nt&&(++Nt,xt(function(){0==--Nt&&qt()},[]))}function Pt(t,e){if(null!==t._state){var n=t._state?e.onFulfilled:e.onRejected;if(null===n)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++Nt,xt(It,[n,t,e])}else t._listeners.push(e)}function It(t,e,n){try{zt=e;var r,i=e._value;e._state?r=t(i):(Mt.length&&(Mt=[]),r=t(i),-1===Mt.indexOf(i)&&function(t){for(var e=_t.length;e;)if(_t[--e]._value===t._value)return void _t.splice(e,1)}(e)),n.resolve(r)}catch(t){n.reject(t)}finally{zt=null,0==--Nt&&qt(),--n.psd.ref||n.psd.finalize()}}function Dt(t,e){var n=e?e._numPrev+1:0;n<at&&(t._prev=e,t._numPrev=n)}function Vt(){Ft()&&Rt()}function Ft(){var t=bt;return bt=!1,wt=!1,t}function Rt(){var t,e,n;do{for(;At.length>0;)for(t=At,At=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}}while(At.length>0);bt=!0,wt=!0}function qt(){var t=_t;_t=[],t.forEach(function(t){t._PSD.onunhandled.call(null,t._value,t)});for(var e=Tt.slice(0),n=e.length;n;)e[--n]()}function Gt(t){return new Ct(st,!1,t)}function Ht(t,e){var n=Et;return function(){var r=Ft(),i=Et;try{return ne(n,!0),t.apply(this,arguments)}catch(t){e&&e(t)}finally{ne(i,!1),r&&Rt()}}}c(Ct.prototype,{then:Ot,_then:function(t,e){Pt(this,new jt(null,null,t,e,Et))},catch:function(t){if(1===arguments.length)return this.then(null,t);var e=arguments[0],n=arguments[1];return"function"==typeof e?this.then(null,function(t){return t instanceof e?n(t):Gt(t)}):this.then(null,function(t){return t&&t.name===e?n(t):Gt(t)})},finally:function(t){return this.then(function(e){return t(),e},function(e){return t(),Gt(e)})},stack:{get:function(){if(this._stack)return this._stack;try{vt=!0;var t=function t(e,n,r){if(n.length===r)return n;var i="";if(!1===e._state){var o,s,a=e._value;null!=a?(o=a.name||"Error",s=a.message||a,i=V(a,0)):(o=a,s=""),n.push(o+(s?": "+s:"")+i)}return U&&((i=V(e._stackHolder,2))&&-1===n.indexOf(i)&&n.push(i),e._prev&&t(e._prev,n,r)),n}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=t),t}finally{vt=!1}}},timeout:function(t,e){var n=this;return t<1/0?new Ct(function(r,i){var o=setTimeout(function(){return i(new X.Timeout(e))},t);n.then(r,i).finally(clearTimeout.bind(null,o))}):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&f(Ct.prototype,Symbol.toStringTag,"Promise"),St.env=re(),c(Ct,{all:function(){var t=j.apply(null,arguments).map(te);return new Ct(function(e,n){0===t.length&&e([]);var r=t.length;t.forEach(function(i,o){return Ct.resolve(i).then(function(n){t[o]=n,--r||e(t)},n)})})},resolve:function(t){if(t instanceof Ct)return t;if(t&&"function"==typeof t.then)return new Ct(function(e,n){t.then(e,n)});var e=new Ct(st,!0,t);return Dt(e,zt),e},reject:Gt,race:function(){var t=j.apply(null,arguments).map(te);return new Ct(function(e,n){t.map(function(t){return Ct.resolve(t).then(e,n)})})},PSD:{get:function(){return Et},set:function(t){return Et=t}},newPSD:Qt,usePSD:ie,scheduler:{get:function(){return xt},set:function(t){xt=t}},rejectionMapper:{get:function(){return kt},set:function(t){kt=t}},follow:function(t,e){return new Ct(function(n,r){return Qt(function(e,n){var r=Et;r.unhandleds=[],r.onunhandled=n,r.finalize=tt(function(){var t=this;!function(t){Tt.push(function e(){t(),Tt.splice(Tt.indexOf(e),1)}),++Nt,xt(function(){0==--Nt&&qt()},[])}(function(){0===t.unhandleds.length?e():n(t.unhandleds[0])})},r.finalize),t()},e,n,r)})}});var Kt={awaits:0,echoes:0,id:0},Wt=0,Lt=[],Xt=0,Zt=0,Yt=0;function Qt(t,e,n,r){var i=Et,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Yt;var a=St.env;o.env=yt?{Promise:Ct,PromiseProp:{value:Ct,configurable:!0,writable:!0},all:Ct.all,race:Ct.race,resolve:Ct.resolve,reject:Ct.reject,nthen:se(a.nthen,o),gthen:se(a.gthen,o)}:{},e&&s(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var u=ie(o,t,n,r);return 0===o.ref&&o.finalize(),u}function Jt(){return Kt.id||(Kt.id=++Wt),++Kt.awaits,Kt.echoes+=ut,Kt.id}function $t(t){!Kt.awaits||t&&t!==Kt.id||(0==--Kt.awaits&&(Kt.id=0),Kt.echoes=Kt.awaits*ut)}function te(t){return Kt.echoes&&t&&t.constructor===pt?(Jt(),t.then(function(t){return $t(),t},function(t){return $t(),he(t)})):t}function ee(){var t=Lt[Lt.length-1];Lt.pop(),ne(t,!1)}function ne(t,e){var n=Et;if((e?!Kt.echoes||Xt++&&t===Et:!Xt||--Xt&&t===Et)||function(t){dt.call(ct,t)}(e?function(t){++Zt,Kt.echoes&&0!=--Kt.echoes||(Kt.echoes=Kt.id=0),Lt.push(Et),ne(t,!0)}.bind(null,t):ee),t!==Et&&(Et=t,n===St&&(St.env=re()),yt)){var r=St.env.Promise,i=t.env;lt.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(o,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject)}}function re(){var t=o.Promise;return yt?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:t.all,race:t.race,resolve:t.resolve,reject:t.reject,nthen:lt.then,gthen:t.prototype.then}:{}}function ie(t,e,n,r,i){var o=Et;try{return ne(t,!0),e(n,r,i)}finally{ne(o,!1)}}function oe(t,e,n){return"function"!=typeof t?t:function(){var r=Et;n&&Jt(),ne(e,!0);try{return t.apply(this,arguments)}finally{ne(r,!1)}}}function se(t,e){return function(n,r){return t.call(this,oe(n,e,!1),oe(r,e,!1))}}var ae="unhandledrejection";function ue(t,e){var n;try{n=e.onuncatched(t)}catch(t){}if(!1!==n)try{var r,i={promise:e,reason:t};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(ae,!0,!0),s(r,i)):o.CustomEvent&&s(r=new CustomEvent(ae,{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(t){}r.defaultPrevented||console.warn("Unhandled rejection: "+(t.stack||t))}catch(t){}}var he=Ct.reject;function ce(t){var e={},n=function(n,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return e[n].subscribe.apply(null,o),t}if("string"==typeof n)return e[n]};n.addEventType=a;for(var o=1,s=arguments.length;o<s;++o)a(arguments[o]);return n;function a(t,o,s){if("object"==typeof t)return function(t){r(t).forEach(function(e){var n=t[e];if(i(n))a(e,t[e][0],t[e][1]);else{if("asap"!==n)throw new X.InvalidArgument("Invalid event config");var r=a(e,J,function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];r.subscribers.forEach(function(t){x(function(){t.apply(null,e)})})})}})}(t);o||(o=it),s||(s=Q);var u={subscribers:[],fire:s,subscribe:function(t){-1===u.subscribers.indexOf(t)&&(u.subscribers.push(t),u.fire=o(u.fire,t))},unsubscribe:function(t){u.subscribers=u.subscribers.filter(function(e){return e!==t}),u.fire=u.subscribers.reduce(o,s)}};return e[t]=n[t]=u,u}}var le,fe=String.fromCharCode(65535),de=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(t){return fe}}(),pe=-1/0,me="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ye="String expected.",ve=[],ge="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),xe=ge,be=ge,we=function(t){return!/(dexie\.js|dexie\.min\.js)/.test(t)};function _e(t,e){var n,a,u,l=_e.dependencies,d=s({addons:_e.addons,autoOpen:!0,indexedDB:l.indexedDB,IDBKeyRange:l.IDBKeyRange},e),p=d.addons,m=d.autoOpen,x=d.indexedDB,k=d.IDBKeyRange,E=this._dbSchema={},T=[],C=[],B={},P=null,I=null,F=!1,R=null,q=!1,G="readwrite",W=this,L=new Ct(function(t){n=t}),Z=new Ct(function(t,e){a=e}),Y=!0,tt=!!je(x);function it(t){this._cfg={version:t,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function st(t,e,n){var i=W._createTransaction(G,C,E);i.create(e),i._completion.catch(n);var o=i._reject.bind(i);Qt(function(){Et.trans=i,0===t?(r(E).forEach(function(t){at(e,t,E[t].primKey,E[t].indexes)}),Ct.follow(function(){return W.on.populate.fire(i)}).catch(o)):function(t,e,n){var i=[],o=T.filter(function(e){return e._cfg.version===t})[0];if(!o)throw new X.Upgrade("Dexie specification of currently installed DB version is missing");E=W._dbSchema=o._cfg.dbschema;var s=!1;return T.filter(function(e){return e._cfg.version>t}).forEach(function(t){i.push(function(){var r=E,i=t._cfg.dbschema;Tt(r,n),Tt(i,n),E=W._dbSchema=i;var o=function(t,e){var n={del:[],add:[],change:[]};for(var r in t)e[r]||n.del.push(r);for(r in e){var i=t[r],o=e[r];if(i){var s={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)s.recreate=!0,n.change.push(s);else{var a=i.idxByName,u=o.idxByName;for(var h in a)u[h]||s.del.push(h);for(h in u){var c=a[h],l=u[h];c?c.src!==l.src&&s.change.push(l):s.add.push(l)}(s.del.length>0||s.add.length>0||s.change.length>0)&&n.change.push(s)}}else n.add.push([r,o])}return n}(r,i);if(o.add.forEach(function(t){at(n,t[0],t[1].primKey,t[1].indexes)}),o.change.forEach(function(t){if(t.recreate)throw new X.Upgrade("Not yet support for changing primary key");var e=n.objectStore(t.name);t.add.forEach(function(t){ut(e,t)}),t.change.forEach(function(t){e.deleteIndex(t.name),ut(e,t)}),t.del.forEach(function(t){e.deleteIndex(t)})}),t._cfg.contentUpgrade)return s=!0,Ct.follow(function(){t._cfg.contentUpgrade(e)})}),i.push(function(e){s&&xe||function(t,e){for(var n=0;n<e.db.objectStoreNames.length;++n){var r=e.db.objectStoreNames[n];null==t[r]&&e.db.deleteObjectStore(r)}}(t._cfg.dbschema,e)})}),function t(){return i.length?Ct.resolve(i.shift()(e.idbtrans)).then(t):Ct.resolve()}().then(function(){!function(t,e){r(t).forEach(function(n){e.db.objectStoreNames.contains(n)||at(e,n,t[n].primKey,t[n].indexes)})}(E,n)})}(t,i,e).catch(o)})}function at(t,e,n,r){var i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(t){ut(i,t)}),i}function ut(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function ht(t,e,n){this.name=t,this.schema=e,this._tx=n,this.hook=B[t]?B[t].hook:ce(null,{creating:[et,Q],reading:[$,J],updating:[rt,Q],deleting:[nt,Q]})}function ct(t,e,n){return(n?Ee:ke)(function(n){t.push(n),e&&e()})}function lt(t,e,n,r,i){return new Ct(function(o,s){var a=n.length,u=a-1;if(0===a)return o();if(r){var h,c=Ee(s),l=ze(null);w(function(){for(var r=0;r<a;++r){h={onsuccess:null,onerror:null};var s=n[r];i.call(h,s[0],s[1],e);var f=t.delete(s[0]);f._hookCtx=h,f.onerror=c,f.onsuccess=r===u?ze(o):l}},function(t){throw h.onerror&&h.onerror(t),t})}else for(var f=0;f<a;++f){var d=t.delete(n[f]);d.onerror=ke(s),f===u&&(d.onsuccess=Ht(function(){return o()}))}})}function ft(t,e,n,r){var i=this;this.db=W,this.mode=t,this.storeNames=e,this.idbtrans=null,this.on=ce(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Ct(function(t,e){i._resolve=t,i._reject=e}),this._completion.then(function(){i.active=!1,i.on.complete.fire()},function(t){var e=i.active;return i.active=!1,i.on.error.fire(t),i.parent?i.parent._reject(t):e&&i.idbtrans&&i.idbtrans.abort(),he(t)})}function dt(t,e,n){this._ctx={table:t,index:":id"===e?null:e,or:n}}function yt(t,e){var n=null,r=null;if(e)try{n=e()}catch(t){r=t}var i=t._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:n,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function vt(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function gt(t,e){return t._cfg.version-e._cfg.version}function xt(t,e,n){e.forEach(function(e){var r=n[e];t.forEach(function(t){e in t||(t===ft.prototype||t instanceof ft?f(t,e,{get:function(){return this.table(e)}}):t[e]=new ht(e,r))})})}function bt(t,e,n,r,i,o){var s=Ht(o?function(t,e,r){return n(o(t),e,r)}:n,i);t.onerror||(t.onerror=ke(i)),t.onsuccess=function(t,e){return function(){try{t.apply(this,arguments)}catch(t){e(t)}}}(e?function(){var n=t.result;if(n){var o=function(){n.continue()};e(n,function(t){o=t},r,i)&&s(n.value,n,function(t){o=t}),o()}else r()}:function(){var e=t.result;if(e){var n=function(){e.continue()};s(e.value,e,function(t){n=t}),n()}else r()},i)}function wt(t,e){return x.cmp(t,e)}function _t(t,e){return wt(t,e)<0?t:e}function Mt(t,e){return wt(t,e)>0?t:e}function zt(t,e){return x.cmp(t,e)}function kt(t,e){return x.cmp(e,t)}function St(t,e){return t<e?-1:t===e?0:1}function At(t,e){return t>e?-1:t===e?0:1}function Nt(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}function Tt(t,e){for(var n=e.db.objectStoreNames,r=0;r<n.length;++r){var i=n[r],s=e.objectStore(i);u="getAll"in s;for(var a=0;a<s.indexNames.length;++a){var h=s.indexNames[a],c=s.index(h).keyPath,l="string"==typeof c?c:"["+y(c).join("+")+"]";if(t[i]){var f=t[i].idxByName[l];f&&(f.name=h)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u=!1)}function Ot(t){W.on("blocked").fire(t),ve.filter(function(t){return t.name===W.name&&t!==W&&!t._vcFired}).map(function(e){return e.on("versionchange").fire(t)})}this.version=function(t){if(P||F)throw new X.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,t);var e=T.filter(function(e){return e._cfg.version===t})[0];return e||(e=new it(t),T.push(e),T.sort(gt),Y=!1,e)},s(it.prototype,{stores:function(t){this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,t):t;var e={};T.forEach(function(t){s(e,t._cfg.storesSource)});var n=this._cfg.dbschema={};return this._parseStoresSpec(e,n),E=W._dbSchema=n,[B,W,ft.prototype].forEach(function(t){for(var e in t)t[e]instanceof ht&&delete t[e]}),xt([B,W,ft.prototype,this._cfg.tables],r(n),n),C=r(n),this},upgrade:function(t){return this._cfg.contentUpgrade=t,this},_parseStoresSpec:function(t,e){r(t).forEach(function(n){if(null!==t[n]){var r={},o=function(t){var e=[];return t.split(",").forEach(function(t){var n=(t=t.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;e.push(new Te(n,r||null,/\&/.test(t),/\*/.test(t),/\+\+/.test(t),i(r),/\./.test(t)))}),e}(t[n]),s=o.shift();if(s.multi)throw new X.Schema("Primary key cannot be multi-valued");s.keyPath&&M(r,s.keyPath,s.auto?0:s.keyPath),o.forEach(function(t){if(t.auto)throw new X.Schema("Only primary key can be marked as autoIncrement (++)");if(!t.keyPath)throw new X.Schema("Index must have a name and cannot be an empty string");M(r,t.keyPath,t.compound?t.keyPath.map(function(){return""}):"")}),e[n]=new Ce(n,s,o,r)}})}}),this._allTables=B,this._createTransaction=function(t,e,n,r){return new ft(t,e,n,r)},this._whenReady=function(t){return q||Et.letThrough?t():new Ct(function(t,e){if(!F){if(!m)return void e(new X.DatabaseClosed);W.open().catch(Q)}L.then(t,e)}).then(t)},this.verno=0,this.open=function(){if(F||P)return L.then(function(){return I?he(I):W});U&&(Z._stackHolder=D()),F=!0,I=null,q=!1;var e=n,i=null;return Ct.race([Z,new Ct(function(e,n){if(!x)throw new X.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=Y?x.open(t):x.open(t,Math.round(10*W.verno));if(!o)throw new X.MissingAPI("IndexedDB API not available");o.onerror=ke(n),o.onblocked=Ht(Ot),o.onupgradeneeded=Ht(function(e){if(i=o.transaction,Y&&!W._allowEmptyDB){o.onerror=Ae,i.abort(),o.result.close();var r=x.deleteDatabase(t);r.onsuccess=r.onerror=Ht(function(){n(new X.NoSuchDatabase("Database "+t+" doesnt exist"))})}else i.onerror=ke(n),st((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,i,n)},n),o.onsuccess=Ht(function(){if(i=null,P=o.result,ve.push(W),Y)!function(){if(W.verno=P.version/10,W._dbSchema=E={},0!==(C=y(P.objectStoreNames,0)).length){var t=P.transaction(Oe(C),"readonly");C.forEach(function(e){for(var n=t.objectStore(e),r=n.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new Te(r,r||"",!1,!1,!!n.autoIncrement,r&&"string"!=typeof r,i),s=[],a=0;a<n.indexNames.length;++a){var u=n.index(n.indexNames[a]);i=(r=u.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var h=new Te(u.name,r,!!u.unique,!!u.multiEntry,!1,r&&"string"!=typeof r,i);s.push(h)}E[e]=new Ce(e,o,s,{})}),xt([B],r(E),E)}}();else if(P.objectStoreNames.length>0)try{Tt(E,P.transaction(Oe(P.objectStoreNames),"readonly"))}catch(t){}P.onversionchange=Ht(function(t){W._vcFired=!0,W.on("versionchange").fire(t)}),tt||"__dbnames"===t||le.dbnames.put({name:t}).catch(Q),e()},n)})]).then(function(){return R=[],Ct.resolve(_e.vip(W.on.ready.fire)).then(function t(){if(R.length>0){var e=R.reduce(ot,Q);return R=[],Ct.resolve(_e.vip(e)).then(t)}})}).finally(function(){R=null}).then(function(){return F=!1,W}).catch(function(t){try{i&&i.abort()}catch(t){}return F=!1,W.close(),he(I=t)}).finally(function(){q=!0,e()})},this.close=function(){var t=ve.indexOf(W);if(t>=0&&ve.splice(t,1),P){try{P.close()}catch(t){}P=null}m=!1,I=new X.DatabaseClosed,F&&a(I),L=new Ct(function(t){n=t}),Z=new Ct(function(t,e){a=e})},this.delete=function(){var e=arguments.length>0;return new Ct(function(n,r){if(e)throw new X.InvalidArgument("Arguments not allowed in db.delete()");function i(){W.close();var e=x.deleteDatabase(t);e.onsuccess=Ht(function(){tt||le.dbnames.delete(t).catch(Q),n()}),e.onerror=ke(r),e.onblocked=Ot}F?L.then(i):i()})},this.backendDB=function(){return P},this.isOpen=function(){return null!==P},this.hasBeenClosed=function(){return I&&I instanceof X.DatabaseClosed},this.hasFailed=function(){return null!==I},this.dynamicallyOpened=function(){return Y},this.name=t,c(this,{tables:{get:function(){return r(B).map(function(t){return B[t]})}}}),this.on=ce(this,"populate","blocked","versionchange",{ready:[ot,Q]}),this.on.ready.subscribe=v(this.on.ready.subscribe,function(t){return function(e,n){_e.vip(function(){q?(I||Ct.resolve().then(e),n&&t(e)):R?(R.push(e),n&&t(e)):(t(e),n||t(function t(){W.on.ready.unsubscribe(e),W.on.ready.unsubscribe(t)}))})}}),this.transaction=function(){var t=function(t,e,n){var r=arguments.length;if(r<2)throw new X.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,S(i),n]}.apply(this,arguments);return this._transaction.apply(this,t)},this._transaction=function(t,e,n){var r=Et.trans;r&&r.db===W&&-1===t.indexOf("!")||(r=null);var i=-1!==t.indexOf("?");t=t.replace("!","").replace("?","");try{var o=e.map(function(t){var e=t instanceof ht?t.name:t;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e});if("r"==t||"readonly"==t)t="readonly";else{if("rw"!=t&&t!=G)throw new X.InvalidArgument("Invalid transaction mode: "+t);t=G}if(r){if("readonly"===r.mode&&t===G){if(!i)throw new X.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach(function(t){if(r&&-1===r.storeNames.indexOf(t)){if(!i)throw new X.SubTransaction("Table "+t+" not included in parent transaction.");r=null}}),i&&r&&!r.active&&(r=null)}}catch(t){return r?r._promise(null,function(e,n){n(t)}):he(t)}return r?r._promise(t,s,"lock"):Et.trans?ie(Et.transless,function(){return W._whenReady(s)}):W._whenReady(s);function s(){return Ct.resolve().then(function(){var e,i=Et.transless||Et,s=W._createTransaction(t,o,E,r),a={trans:s,transless:i};r?s.idbtrans=r.idbtrans:s.create(),n.constructor===mt&&Jt();var u=Ct.follow(function(){if(e=n.call(s,s))if(e.constructor===pt){var t=$t.bind(null,null);e.then(t,t)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=Ne(e))},a);return(e&&"function"==typeof e.then?Ct.resolve(e).then(function(t){return s.active?t:he(new X.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):u.then(function(){return e})).then(function(t){return r&&s._resolve(),s._completion.then(function(){return t})}).catch(function(t){return s._reject(t),he(t)})})}},this.table=function(t){if(!h(B,t))throw new X.InvalidTable("Table "+t+" does not exist");return B[t]},c(ht.prototype,{_trans:function(t,e,n){var r=this._tx||Et.trans;return r&&r.db===W?r===Et.trans?r._promise(t,e,n):Qt(function(){return r._promise(t,e,n)},{trans:r,transless:Et.transless||Et}):function t(e,n,r){if(q||Et.letThrough){var i=W._createTransaction(e,n,E);try{i.create()}catch(t){return he(t)}return i._promise(e,function(t,e){return Qt(function(){return Et.trans=i,r(t,e,i)})}).then(function(t){return i._completion.then(function(){return t})})}if(!F){if(!m)return he(new X.DatabaseClosed);W.open().catch(Q)}return L.then(function(){return t(e,n,r)})}(t,[this.name],e)},_idbstore:function(t,e,n){var r=this.name;return this._trans(t,function(t,n,i){if(-1===i.storeNames.indexOf(r))throw new X.NotFound("Table"+r+" not part of transaction");return e(t,n,i.idbtrans.objectStore(r),i)},n)},get:function(t,e){if(t&&t.constructor===Object)return this.where(t).first(e);var n=this;return this._idbstore("readonly",function(e,r,i){var o=i.get(t);o.onerror=ke(r),o.onsuccess=Ht(function(){e(n.hook.reading.fire(o.result))},r)}).then(e)},where:function(t){if("string"==typeof t)return new dt(this,t);if(i(t))return new dt(this,"["+t.join("+")+"]");var e=r(t);if(1===e.length)return this.where(e[0]).equals(t[e[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(t){return t.compound&&e.every(function(e){return t.keyPath.indexOf(e)>=0})&&t.keyPath.every(function(t){return e.indexOf(t)>=0})})[0];if(n&&de!==fe)return this.where(n.name).equals(n.keyPath.map(function(e){return t[e]}));n||console.warn("The query "+JSON.stringify(t)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var o=this.schema.idxByName,s=e.reduce(function(e,n){return[e[0]||o[n],e[0]||!o[n]?Nt(e[1],function(e){return""+_(e,n)==""+t[n]}):e[1]]},[null,null]),a=s[0];return a?this.where(a.name).equals(t[a.keyPath]).filter(s[1]):n?this.filter(s[1]):this.where(e).equals("")},count:function(t){return this.toCollection().count(t)},offset:function(t){return this.toCollection().offset(t)},limit:function(t){return this.toCollection().limit(t)},reverse:function(){return this.toCollection().reverse()},filter:function(t){return this.toCollection().and(t)},each:function(t){return this.toCollection().each(t)},toArray:function(t){return this.toCollection().toArray(t)},orderBy:function(t){return new yt(new dt(this,i(t)?"["+t.join("+")+"]":t))},toCollection:function(){return new yt(new dt(this))},mapToClass:function(t,e){this.schema.mappedClass=t;var n=Object.create(t.prototype);e&&Me(n,e),this.schema.instanceTemplate=n;var r=function(e){if(!e)return e;var n=Object.create(t.prototype);for(var r in e)if(h(e,r))try{n[r]=e[r]}catch(t){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),t},defineClass:function(t){return this.mapToClass(_e.defineClass(t),t)},bulkDelete:function(t){return this.hook.deleting.fire===Q?this._idbstore(G,function(e,n,r,i){e(lt(r,i,t,!1,Q))}):this.where(":id").anyOf(t).delete().then(function(){})},bulkPut:function(t,e){var n=this;return this._idbstore(G,function(r,i,o){if(!o.keyPath&&!n.schema.primKey.auto&&!e)throw new X.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&e)throw new X.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return r();var s,a,u=function(t){0===h.length?r(t):i(new K(n.name+".bulkPut(): "+h.length+" of "+c+" operations failed",h))},h=[],c=t.length,l=n;if(n.hook.creating.fire===Q&&n.hook.updating.fire===Q){a=ct(h);for(var f=0,d=t.length;f<d;++f)(s=e?o.put(t[f],e[f]):o.put(t[f])).onerror=a;s.onerror=ct(h,u),s.onsuccess=Se(u)}else{var p=e||o.keyPath&&t.map(function(t){return _(t,o.keyPath)}),m=p&&b(p,function(e,n){return null!=e&&[e,t[n]]});(p?l.where(":id").anyOf(p.filter(function(t){return null!=t})).modify(function(){this.value=m[this.primKey],m[this.primKey]=null}).catch(H,function(t){h=t.failures}).then(function(){for(var n=[],r=e&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||m[o])&&(n.push(t[i]),e&&r.push(o),null!=o&&(m[o]=null))}return n.reverse(),e&&r.reverse(),l.bulkAdd(n,r)}).then(function(t){var e=p[p.length-1];return null!=e?e:t}):l.bulkAdd(t)).then(u).catch(K,function(t){h=h.concat(t.failures),u()}).catch(i)}},"locked")},bulkAdd:function(t,e){var n=this,r=this.hook.creating.fire;return this._idbstore(G,function(i,o,s,a){if(!s.keyPath&&!n.schema.primKey.auto&&!e)throw new X.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(s.keyPath&&e)throw new X.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==t.length)throw new X.InvalidArgument("Arguments objects and keys must have the same length");if(0===t.length)return i();function u(t){0===f.length?i(t):o(new K(n.name+".bulkAdd(): "+f.length+" of "+d+" operations failed",f))}var h,c,l,f=[],d=t.length;if(r!==Q){var p,m=s.keyPath;c=ct(f,null,!0),l=ze(null),w(function(){for(var n=0,i=t.length;n<i;++n){p={onerror:null,onsuccess:null};var o=e&&e[n],u=t[n],f=e?o:m?_(u,m):void 0,d=r.call(p,f,u,a);null==f&&null!=d&&(m?M(u=A(u),m,d):o=d),(h=null!=o?s.add(u,o):s.add(u))._hookCtx=p,n<i-1&&(h.onerror=c,p.onsuccess&&(h.onsuccess=l))}},function(t){throw p.onerror&&p.onerror(t),t}),h.onerror=ct(f,u,!0),h.onsuccess=ze(u)}else{c=ct(f);for(var y=0,v=t.length;y<v;++y)(h=e?s.add(t[y],e[y]):s.add(t[y])).onerror=c;h.onerror=ct(f,u),h.onsuccess=Se(u)}})},add:function(t,e){var n=this.hook.creating.fire;return this._idbstore(G,function(r,i,o,s){var a={onsuccess:null,onerror:null};if(n!==Q){var u=null!=e?e:o.keyPath?_(t,o.keyPath):void 0,h=n.call(a,u,t,s);null==u&&null!=h&&(o.keyPath?M(t,o.keyPath,h):e=h)}try{var c=null!=e?o.add(t,e):o.add(t);c._hookCtx=a,c.onerror=Ee(i),c.onsuccess=ze(function(e){var n=o.keyPath;n&&M(t,n,e),r(e)})}catch(t){throw a.onerror&&a.onerror(t),t}})},put:function(t,e){var n=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==Q||i!==Q){var o=this.schema.primKey.keyPath,s=void 0!==e?e:o&&_(t,o);return null==s?this.add(t):(t=A(t),this._trans(G,function(){return n.where(":id").equals(s).modify(function(){this.value=t}).then(function(r){return 0===r?n.add(t,e):s})},"locked"))}return this._idbstore(G,function(n,r,i){var o=void 0!==e?i.put(t,e):i.put(t);o.onerror=ke(r),o.onsuccess=Ht(function(e){var r=i.keyPath;r&&M(t,r,e.target.result),n(o.result)})})},delete:function(t){return this.hook.deleting.subscribers.length?this.where(":id").equals(t).delete():this._idbstore(G,function(e,n,r){var i=r.delete(t);i.onerror=ke(n),i.onsuccess=Ht(function(){e(i.result)})})},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore(G,function(t,e,n){var r=n.clear();r.onerror=ke(e),r.onsuccess=Ht(function(){t(r.result)})})},update:function(t,e){if("object"!=typeof e||i(e))throw new X.InvalidArgument("Modifications must be an object.");if("object"!=typeof t||i(t))return this.where(":id").equals(t).modify(e);r(e).forEach(function(n){M(t,n,e[n])});var n=_(t,this.schema.primKey.keyPath);return void 0===n?he(new X.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(e)}}),c(ft.prototype,{_lock:function(){return g(!Et.global),++this._reculock,1!==this._reculock||Et.global||(Et.lockOwnerFor=this),this},_unlock:function(){if(g(!Et.global),0==--this._reculock)for(Et.global||(Et.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var t=this._blockedFuncs.shift();try{ie(t[1],t[0])}catch(t){}}return this},_locked:function(){return this._reculock&&Et.lockOwnerFor!==this},create:function(t){var e=this;if(!this.mode)return this;if(g(!this.idbtrans),!t&&!P)switch(I&&I.name){case"DatabaseClosedError":throw new X.DatabaseClosed(I);case"MissingAPIError":throw new X.MissingAPI(I.message,I);default:throw new X.OpenFailed(I)}if(!this.active)throw new X.TransactionInactive;return g(null===this._completion._state),(t=this.idbtrans=t||P.transaction(Oe(this.storeNames),this.mode)).onerror=Ht(function(n){Ae(n),e._reject(t.error)}),t.onabort=Ht(function(n){Ae(n),e.active&&e._reject(new X.Abort(t.error)),e.active=!1,e.on("abort").fire(n)}),t.oncomplete=Ht(function(){e.active=!1,e._resolve()}),this},_promise:function(t,e,n){var r=this;if(t===G&&this.mode!==G)return he(new X.ReadOnly("Transaction is readonly"));if(!this.active)return he(new X.TransactionInactive);if(this._locked())return new Ct(function(i,o){r._blockedFuncs.push([function(){r._promise(t,e,n).then(i,o)},Et])});if(n)return Qt(function(){var t=new Ct(function(t,n){r._lock();var i=e(t,n,r);i&&i.then&&i.then(t,n)});return t.finally(function(){return r._unlock()}),t._lib=!0,t});var i=new Ct(function(t,n){var i=e(t,n,r);i&&i.then&&i.then(t,n)});return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(t){var e=this._root();if(t=Ct.resolve(t),e._waitingFor)e._waitingFor=e._waitingFor.then(function(){return t});else{e._waitingFor=t,e._waitingQueue=[];var n=e.idbtrans.objectStore(e.storeNames[0]);!function t(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(n.get(-1/0).onsuccess=t)}()}var r=e._waitingFor;return new Ct(function(n,i){t.then(function(t){return e._waitingQueue.push(Ht(n.bind(null,t)))},function(t){return e._waitingQueue.push(Ht(i.bind(null,t)))}).finally(function(){e._waitingFor===r&&(e._waitingFor=null)})})},abort:function(){this.active&&this._reject(new X.Abort),this.active=!1},tables:{get:function(){return console.warn("Transaction.tables is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+V(D(),1)),function(){return B}.apply(this,arguments)}},table:function(t){return new ht(t,W.table(t).schema,this)}}),c(dt.prototype,function(){function t(t,e,n){var r=t instanceof dt?new yt(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function e(t){return new yt(t,function(){return k.only("")}).limit(0)}function n(t,e,n,r,i,o){for(var s=Math.min(t.length,r.length),a=-1,u=0;u<s;++u){var h=e[u];if(h!==r[u])return i(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):i(t[u],r[u])<0?t.substr(0,u)+r[u]+n.substr(u+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[u],h)<0&&(a=u)}return s<r.length&&"next"===o?t+n.substr(t.length):s<t.length&&"prev"===o?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function r(e,r,i,o){var s,a,u,h,c,l,f,d=i.length;if(!i.every(function(t){return"string"==typeof t}))return t(e,ye);function p(t){s=function(t){return"next"===t?function(t){return t.toUpperCase()}:function(t){return t.toLowerCase()}}(t),a=function(t){return"next"===t?function(t){return t.toLowerCase()}:function(t){return t.toUpperCase()}}(t),u="next"===t?St:At;var e=i.map(function(t){return{lower:a(t),upper:s(t)}}).sort(function(t,e){return u(t.lower,e.lower)});h=e.map(function(t){return t.upper}),c=e.map(function(t){return t.lower}),l=t,f="next"===t?"":o}p("next");var m=new yt(e,function(){return k.bound(h[0],c[d-1]+o)});m._ondirectionchange=function(t){p(t)};var y=0;return m._addAlgorithm(function(t,e,i){var o=t.key;if("string"!=typeof o)return!1;var s=a(o);if(r(s,c,y))return!0;for(var p=null,m=y;m<d;++m){var v=n(o,s,h[m],c[m],u,l);null===v&&null===p?y=m+1:(null===p||u(p,v)>0)&&(p=v)}return e(null!==p?function(){t.continue(p+f)}:i),!1}),m}return{between:function(n,r,i,o){i=!1!==i,o=!0===o;try{return wt(n,r)>0||0===wt(n,r)&&(i||o)&&(!i||!o)?e(this):new yt(this,function(){return k.bound(n,r,!i,!o)})}catch(e){return t(this,me)}},equals:function(t){return new yt(this,function(){return k.only(t)})},above:function(t){return new yt(this,function(){return k.lowerBound(t,!0)})},aboveOrEqual:function(t){return new yt(this,function(){return k.lowerBound(t)})},below:function(t){return new yt(this,function(){return k.upperBound(t,!0)})},belowOrEqual:function(t){return new yt(this,function(){return k.upperBound(t)})},startsWith:function(e){return"string"!=typeof e?t(this,ye):this.between(e,e+fe,!0,!0)},startsWithIgnoreCase:function(t){return""===t?this.startsWith(t):r(this,function(t,e){return 0===t.indexOf(e[0])},[t],fe)},equalsIgnoreCase:function(t){return r(this,function(t,e){return t===e[0]},[t],"")},anyOfIgnoreCase:function(){var t=j.apply(O,arguments);return 0===t.length?e(this):r(this,function(t,e){return-1!==e.indexOf(t)},t,"")},startsWithAnyOfIgnoreCase:function(){var t=j.apply(O,arguments);return 0===t.length?e(this):r(this,function(t,e){return e.some(function(e){return 0===t.indexOf(e)})},t,fe)},anyOf:function(){var n=j.apply(O,arguments),r=zt;try{n.sort(r)}catch(e){return t(this,me)}if(0===n.length)return e(this);var i=new yt(this,function(){return k.bound(n[0],n[n.length-1])});i._ondirectionchange=function(t){r="next"===t?zt:kt,n.sort(r)};var o=0;return i._addAlgorithm(function(t,e,i){for(var s=t.key;r(s,n[o])>0;)if(++o===n.length)return e(i),!1;return 0===r(s,n[o])||(e(function(){t.continue(n[o])}),!1)}),i},notEqual:function(t){return this.inAnyRange([[pe,t],[t,de]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=j.apply(O,arguments);if(0===e.length)return new yt(this);try{e.sort(zt)}catch(e){return t(this,me)}var n=e.reduce(function(t,e){return t?t.concat([[t[t.length-1][1],e]]):[[pe,e]]},null);return n.push([e[e.length-1],de]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(n,r){if(0===n.length)return e(this);if(!n.every(function(t){return void 0!==t[0]&&void 0!==t[1]&&zt(t[0],t[1])<=0}))return t(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",X.InvalidArgument);var i,o=!r||!1!==r.includeLowers,s=r&&!0===r.includeUppers,a=zt;function u(t,e){return a(t[0],e[0])}try{(i=n.reduce(function(t,e){for(var n=0,r=t.length;n<r;++n){var i=t[n];if(wt(e[0],i[1])<0&&wt(e[1],i[0])>0){i[0]=_t(i[0],e[0]),i[1]=Mt(i[1],e[1]);break}}return n===r&&t.push(e),t},[])).sort(u)}catch(e){return t(this,me)}var h=0,c=s?function(t){return zt(t,i[h][1])>0}:function(t){return zt(t,i[h][1])>=0},l=o?function(t){return kt(t,i[h][0])>0}:function(t){return kt(t,i[h][0])>=0},f=c,d=new yt(this,function(){return k.bound(i[0][0],i[i.length-1][1],!o,!s)});return d._ondirectionchange=function(t){"next"===t?(f=c,a=zt):(f=l,a=kt),i.sort(u)},d._addAlgorithm(function(t,e,n){for(var r=t.key;f(r);)if(++h===i.length)return e(n),!1;return!!function(t){return!c(t)&&!l(t)}(r)||0!==wt(r,i[h][1])&&0!==wt(r,i[h][0])&&(e(function(){a===zt?t.continue(i[h][0]):t.continue(i[h][1])}),!1)}),d},startsWithAnyOf:function(){var n=j.apply(O,arguments);return n.every(function(t){return"string"==typeof t})?0===n.length?e(this):this.inAnyRange(n.map(function(t){return[t,t+fe]})):t(this,"startsWithAnyOf() only works with strings")}}}),c(yt.prototype,function(){function t(t,e){t.filter=Nt(t.filter,e)}function e(t,e,n){var r=t.replayFilter;t.replayFilter=r?function(){return Nt(r(),e())}:e,t.justLimit=n&&!r}function n(t,e){if(t.isPrimKey)return e;var n=t.table.schema.idxByName[t.index];if(!n)throw new X.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return e.index(n.name)}function i(t,e){var r=n(t,e);return t.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(t.range||null,t.dir+t.unique):r.openCursor(t.range||null,t.dir+t.unique)}function o(t,e,n,r,o){var s=t.replayFilter?Nt(t.filter,t.replayFilter()):t.filter;t.or?function(){var a={},u=0;function c(){2==++u&&n()}function l(t,n,i){if(!s||s(n,i,c,r)){var o=n.primaryKey,u=""+o;"[object ArrayBuffer]"===u&&(u=""+new Uint8Array(o)),h(a,u)||(a[u]=!0,e(t,n,i))}}t.or._iterate(l,c,r,o),bt(i(t,o),t.algorithm,l,c,r,!t.keysOnly&&t.valueMapper)}():bt(i(t,o),Nt(t.algorithm,s),e,n,r,!t.keysOnly&&t.valueMapper)}return{_read:function(t,e){var n=this._ctx;return n.error?n.table._trans(null,he.bind(null,n.error)):n.table._idbstore("readonly",t).then(e)},_write:function(t){var e=this._ctx;return e.error?e.table._trans(null,he.bind(null,e.error)):e.table._idbstore(G,t,"locked")},_addAlgorithm:function(t){var e=this._ctx;e.algorithm=Nt(e.algorithm,t)},_iterate:function(t,e,n,r){return o(this._ctx,t,e,n,r)},clone:function(t){var e=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return t&&s(n,t),e._ctx=n,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(t){var e=this._ctx;return this._read(function(n,r,i){o(e,t,n,r,i)})},count:function(t){var e=this._ctx;if(vt(e,!0))return this._read(function(t,r,i){var o=n(e,i),s=e.range?o.count(e.range):o.count();s.onerror=ke(r),s.onsuccess=function(n){t(Math.min(n.target.result,e.limit))}},t);var r=0;return this._read(function(t,n,i){o(e,function(){return++r,!1},function(){t(r)},n,i)},t)},sortBy:function(t,e){var n=t.split(".").reverse(),r=n[0],i=n.length-1;function o(t,e){return e?o(t[n[e]],e-1):t[r]}var s="next"===this._ctx.dir?1:-1;function a(t,e){var n=o(t,i),r=o(e,i);return n<r?-s:n>r?s:0}return this.toArray(function(t){return t.sort(a)}).then(e)},toArray:function(t){var e=this._ctx;return this._read(function(t,r,i){if(u&&"next"===e.dir&&vt(e,!0)&&e.limit>0){var s=e.table.hook.reading.fire,a=n(e,i),h=e.limit<1/0?a.getAll(e.range,e.limit):a.getAll(e.range);h.onerror=ke(r),h.onsuccess=Se(s===J?t:function(e){try{t(e.map(s))}catch(t){r(t)}})}else{var c=[];o(e,function(t){c.push(t)},function(){t(c)},r,i)}},t)},offset:function(t){var n=this._ctx;return t<=0?this:(n.offset+=t,vt(n)?e(n,function(){var e=t;return function(t,n){return 0===e||(1===e?(--e,!1):(n(function(){t.advance(e),e=0}),!1))}}):e(n,function(){var e=t;return function(){return--e<0}}),this)},limit:function(t){return this._ctx.limit=Math.min(this._ctx.limit,t),e(this._ctx,function(){var e=t;return function(t,n,r){return--e<=0&&n(r),e>=0}},!0),this},until:function(e,n){return t(this._ctx,function(t,r,i){return!e(t.value)||(r(i),n)}),this},first:function(t){return this.limit(1).toArray(function(t){return t[0]}).then(t)},last:function(t){return this.reverse().first(t)},filter:function(e){return t(this._ctx,function(t){return e(t.value)}),function(t,e){t.isMatch=Nt(t.isMatch,e)}(this._ctx,e),this},and:function(t){return this.filter(t)},or:function(t){return new dt(this._ctx.table,t,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.key,n)})},eachUniqueKey:function(t){return this._ctx.unique="unique",this.eachKey(t)},eachPrimaryKey:function(t){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each(function(e,n){t(n.primaryKey,n)})},keys:function(t){var e=this._ctx;e.keysOnly=!e.isMatch;var n=[];return this.each(function(t,e){n.push(e.key)}).then(function(){return n}).then(t)},primaryKeys:function(t){var e=this._ctx;if(u&&"next"===e.dir&&vt(e,!0)&&e.limit>0)return this._read(function(t,r,i){var o=n(e,i),s=e.limit<1/0?o.getAllKeys(e.range,e.limit):o.getAllKeys(e.range);s.onerror=ke(r),s.onsuccess=Se(t)}).then(t);e.keysOnly=!e.isMatch;var r=[];return this.each(function(t,e){r.push(e.primaryKey)}).then(function(){return r}).then(t)},uniqueKeys:function(t){return this._ctx.unique="unique",this.keys(t)},firstKey:function(t){return this.limit(1).keys(function(t){return t[0]}).then(t)},lastKey:function(t){return this.reverse().firstKey(t)},distinct:function(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return t(this._ctx,function(t){var e=t.primaryKey.toString(),n=h(r,e);return r[e]=!0,!n}),this},modify:function(t){var e=this,n=this._ctx.table.hook,i=n.updating.fire,o=n.deleting.fire;return this._write(function(n,a,u,c){var l;if("function"==typeof t)l=i===Q&&o===Q?t:function(e){var n=A(e);if(!1===t.call(this,e,this))return!1;if(h(this,"value")){var s=N(n,this.value),a=i.call(this,s,this.primKey,n,c);a&&(e=this.value,r(a).forEach(function(t){M(e,t,a[t])}))}else o.call(this,this.primKey,e,c)};else if(i===Q){var f=r(t),d=f.length;l=function(e){for(var n=!1,r=0;r<d;++r){var i=f[r],o=t[i];_(e,i)!==o&&(M(e,i,o),n=!0)}return n}}else{var p=t;t=z(p),l=function(e){var n=!1,o=i.call(this,t,this.primKey,A(e),c);return o&&s(t,o),r(t).forEach(function(r){var i=t[r];_(e,r)!==i&&(M(e,r,i),n=!0)}),o&&(t=z(p)),n}}var m=0,y=0,v=!1,g=[],x=[],b=null;function k(t){return t&&(g.push(t),x.push(b)),a(new H("Error modifying one or more objects",g,y,x))}function S(){v&&y+g.length===m&&(g.length>0?k():n(y))}e.clone().raw()._iterate(function(t,e){b=e.primaryKey;var n={primKey:e.primaryKey,value:t,onsuccess:null,onerror:null};function r(t){return g.push(t),x.push(n.primKey),S(),!0}if(!1!==l.call(n,t,n)){var i=!h(n,"value");++m,w(function(){var t=i?e.delete():e.update(n.value);t._hookCtx=n,t.onerror=Ee(r),t.onsuccess=ze(function(){++y,S()})},r)}else n.onsuccess&&n.onsuccess(n.value)},function(){v=!0,S()},k,u)})},delete:function(){var t=this,e=this._ctx,n=e.range,r=e.table.hook.deleting.fire,i=r!==Q;if(!i&&vt(e)&&(e.isPrimKey&&!be||!n))return this._write(function(t,e,r){var i=ke(e),o=n?r.count(n):r.count();o.onerror=i,o.onsuccess=function(){var s=o.result;w(function(){var e=n?r.delete(n):r.clear();e.onerror=i,e.onsuccess=function(){return t(s)}},function(t){return e(t)})}});var o=i?2e3:1e4;return this._write(function(n,s,a,u){var h=0,c=t.clone({keysOnly:!e.isMatch&&!i}).distinct().limit(o).raw(),l=[],f=function(){return c.each(i?function(t,e){l.push([e.primaryKey,e.value])}:function(t,e){l.push(e.primaryKey)}).then(function(){return i?l.sort(function(t,e){return zt(t[0],e[0])}):l.sort(zt),lt(a,u,l,i,r)}).then(function(){var t=l.length;return l=[],t<o?h+=t:f()})};n(f())})}}}),s(this,{Collection:yt,Table:ht,Transaction:ft,Version:it,WhereClause:dt}),W.on("versionchange",function(t){t.newVersion>0?console.warn("Another connection wants to upgrade database '"+W.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+W.name+"'. Closing db now to resume the delete request."),W.close()}),W.on("blocked",function(t){!t.newVersion||t.newVersion<t.oldVersion?console.warn("Dexie.delete('"+W.name+"') was blocked"):console.warn("Upgrade '"+W.name+"' blocked by other connection holding version "+t.oldVersion/10)}),p.forEach(function(t){t(W)})}function Me(t,e){return r(e).forEach(function(n){var r=function t(e){if("function"==typeof e)return new e;if(i(e))return[t(e[0])];if(e&&"object"==typeof e){var n={};return Me(n,e),n}return e}(e[n]);t[n]=r}),t}function ze(t){return Ht(function(e){var n=e.target,r=n._hookCtx,i=r.value||n.result,o=r&&r.onsuccess;o&&o(i),t&&t(i)},t)}function ke(t){return Ht(function(e){return Ae(e),t(e.target.error),!1})}function Se(t){return Ht(function(e){t(e.target.result)})}function Ee(t){return Ht(function(e){var n=e.target,r=n.error,i=n._hookCtx,o=i&&i.onerror;return o&&o(r),Ae(e),t(r),!1})}function Ae(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}function Ne(t){var e=function(e){return t.next(e)},n=o(e),r=o(function(e){return t.throw(e)});function o(t){return function(e){var o=t(e),s=o.value;return o.done?s:s&&"function"==typeof s.then?s.then(n,r):i(s)?Ct.all(s).then(n,r):n(s)}}return o(e)()}function Te(t,e,n,r,i,o,s){this.name=t,this.keyPath=e,this.unique=n,this.multi=r,this.auto=i,this.compound=o,this.dotted=s;var a="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(n?"&":"")+(r?"*":"")+(i?"++":"")+a}function Ce(t,e,n,r){this.name=t,this.primKey=e||new Te,this.indexes=n||[new Te],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=b(n,function(t){return[t.name,t]})}function Oe(t){return 1===t.length?t[0]:t}function je(t){var e=t&&(t.getDatabaseNames||t.webkitGetDatabaseNames);return e&&e.bind(t)}B(U,we),c(_e,Y),c(_e,{delete:function(t){var e=new _e(t),n=e.delete();return n.onblocked=function(t){return e.on("blocked",t),this},n},exists:function(t){return new _e(t).open().then(function(t){return t.close(),!0}).catch(_e.NoSuchDatabaseError,function(){return!1})},getDatabaseNames:function(t){var e=je(_e.dependencies.indexedDB);return e?new Ct(function(t,n){var r=e();r.onsuccess=function(e){t(y(e.target.result,0))},r.onerror=ke(n)}).then(t):le.dbnames.toCollection().primaryKeys(t)},defineClass:function(){return function(t){t&&s(this,t)}},applyStructure:Me,ignoreTransaction:function(t){return Et.trans?ie(Et.transless,t):t()},vip:function(t){return Qt(function(){return Et.letThrough=!0,t()})},async:function(t){return function(){try{var e=Ne(t.apply(this,arguments));return e&&"function"==typeof e.then?e:Ct.resolve(e)}catch(t){return he(t)}}},spawn:function(t,e,n){try{var r=Ne(t.apply(n,e||[]));return r&&"function"==typeof r.then?r:Ct.resolve(r)}catch(t){return he(t)}},currentTransaction:{get:function(){return Et.trans||null}},waitFor:function(t,e){var n=Ct.resolve("function"==typeof t?_e.ignoreTransaction(t):t).timeout(e||6e4);return Et.trans?Et.trans.waitFor(n):n},Promise:Ct,debug:{get:function(){return U},set:function(t){B(t,"dexie"===t?function(){return!0}:we)}},derive:d,extend:s,props:c,override:v,Events:ce,getByKeyPath:_,setByKeyPath:M,delByKeyPath:function(t,e){"string"==typeof e?M(t,e,void 0):"length"in e&&[].map.call(e,function(e){M(t,e,void 0)})},shallowClone:z,deepClone:A,getObjectDiff:N,asap:x,maxKey:de,minKey:pe,addons:[],connections:ve,MultiModifyError:X.Modify,errnames:W,IndexSpec:Te,TableSchema:Ce,dependencies:function(){try{return{indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(t){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map(function(t){return parseInt(t)}).reduce(function(t,e,n){return t+e/Math.pow(10,2*n)}),default:_e,Dexie:_e}),Ct.rejectionMapper=function(t,e){if(!t||t instanceof G||t instanceof TypeError||t instanceof SyntaxError||!t.name||!Z[t.name])return t;var n=new Z[t.name](e||t.message,t);return"stack"in t&&f(n,"stack",{get:function(){return this.inner.stack}}),n},(le=new _e("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==o.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach(function(t){return le.dbnames.put({name:t}).catch(Q)}),localStorage.removeItem("Dexie.DatabaseNames"))}catch(t){}}(),e.default=_e}.call(this,n(16),n(21).setImmediate)},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(22),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(16))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i=1,o={},s=!1,a=t.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(t);u=u&&u.setTimeout?u:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){c(t)})}:function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?function(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&c(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),r=function(n){t.postMessage(e+n,"*")}}():t.MessageChannel?function(){var t=new MessageChannel;t.port1.onmessage=function(t){c(t.data)},r=function(e){t.port2.postMessage(e)}}():a&&"onreadystatechange"in a.createElement("script")?function(){var t=a.documentElement;r=function(e){var n=a.createElement("script");n.onreadystatechange=function(){c(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}():r=function(t){setTimeout(c,0,t)},u.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return o[i]=s,r(i),i++},u.clearImmediate=h}function h(t){delete o[t]}function c(t){if(s)setTimeout(c,0,t);else{var e=o[t];if(e){s=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{h(t),s=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(16),n(23))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,h=[],c=!1,l=-1;function f(){c&&u&&(c=!1,u.length?h=u.concat(h):l=-1,h.length&&d())}function d(){if(!c){var t=a(f);c=!0;for(var e=h.length;e;){for(u=h,h=[];++l<e;)u&&u[l].run();l=-1,e=h.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new p(t,e)),1!==h.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.generateHeightMap=e.generateNoiseMap=void 0;var r=a(n(25)),i=a(n(34)),o=a(n(35)),s=n(17);function a(t){return t&&t.__esModule?t:{default:t}}e.generateNoiseMap=function(t,e){return function(t){var e=t.seed,n=t.scale,o=void 0===n?100:n,a=t.octaves,u=void 0===a?8:a,h=t.persistance,c=void 0===h?.5:h,l=t.lacunarity,f=void 0===l?2:l,d=t.offset,p=void 0===d?{x:0,y:0}:d;o<=0&&(o=1e-4);for(var m=s.CHUNK_SEGMENTS,y=s.CHUNK_SEGMENTS,v=new Float32Array(m*y),g=new r.default(e),x=new i.default(e),b=0,w=1,_=[],M=0;M<u;M++){var z=2e5*g.quick()-1e5+p.x,k=2e5*g.quick()-1e5-p.y;_.push({x:z,y:k}),b+=w,w*=c}for(var S=m/2,E=y/2,A=0;A<y;A++)for(var N=0;N<m;N++){w=1;for(var T=1,C=0,O=0;O<u;O++){var j=(N-S+_[O].x)/o*T,U=(A-E+_[O].y)/o*T;C+=x.noise2D(j,U)*w,w*=c,T*=f}v[N*m+A]=Math.max(0,(C+1)/(1.16*b))}return v}({seed:"a-19sdfu428",offset:{x:e*(s.CHUNK_SEGMENTS-1),y:-t*(s.CHUNK_SEGMENTS-1)}})};var u=(0,o.default)(1,0,.85,.85);e.generateHeightMap=function(t){for(var e=0;e<t.length;e++)t[e]=60*u(t[e]);return t}},function(t,e,n){var r=n(26),i=n(27),o=n(28),s=n(29),a=n(30),u=n(31),h=n(32);h.alea=r,h.xor128=i,h.xorwow=o,h.xorshift7=s,h.xor4096=a,h.tychei=u,t.exports=h},function(t,e,n){(function(t){var r;!function(t,i,o){function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function a(t,e){var n=new function(t){var e=this,n=function(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=n(" "),e.s1=n(" "),e.s2=n(" "),e.s0-=n(t),e.s0<0&&(e.s0+=1),e.s1-=n(t),e.s1<0&&(e.s1+=1),e.s2-=n(t),e.s2<0&&(e.s2+=1),n=null}(t),r=e&&e.state,i=n.next;return i.int32=function(){return 4294967296*n.next()|0},i.double=function(){return i()+1.1102230246251565e-16*(2097152*i()|0)},i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n(4)&&n(10)?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.alea=a}(0,"object"==typeof t&&t,n(4))}).call(this,n(9)(t))},function(t,e,n){(function(t){var r;!function(t,i,o){function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function a(t,e){var n=new function(t){var e=this,n="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),e.next()}(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n(4)&&n(10)?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.xor128=a}(0,"object"==typeof t&&t,n(4))}).call(this,n(9)(t))},function(t,e,n){(function(t){var r;!function(t,i,o){function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function a(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:n+=t;for(var r=0;r<n.length+64;r++)e.x^=0|n.charCodeAt(r),r==n.length&&(e.d=e.x<<10^e.x>>>4),e.next()}(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n(4)&&n(10)?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.xorwow=a}(0,"object"==typeof t&&t,n(4))}).call(this,n(9)(t))},function(t,e,n){(function(t){var r;!function(t,i,o){function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function a(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.x,i=e.i;return t=r[i],n=(t^=t>>>7)^t<<24,n^=(t=r[i+1&7])^t>>>10,n^=(t=r[i+3&7])^t>>>3,n^=(t=r[i+4&7])^t<<7,t=r[i+7&7],n^=(t^=t<<13)^t<<9,r[i]=n,e.i=i+1&7,n},function(t,e){var n,r=[];if(e===(0|e))r[0]=e;else for(e=""+e,n=0;n<e.length;++n)r[7&n]=r[7&n]<<15^e.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],t.x=r,t.i=0,n=256;n>0;--n)t.next()}(e,t)}(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.x&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n(4)&&n(10)?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.xorshift7=a}(0,"object"==typeof t&&t,n(4))}).call(this,n(9)(t))},function(t,e,n){(function(t){var r;!function(t,i,o){function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function a(t,e){null==t&&(t=+new Date);var n=new function(t){var e=this;e.next=function(){var t,n,r=e.w,i=e.X,o=e.i;return e.w=r=r+1640531527|0,n=i[o+34&127],t=i[o=o+1&127],n^=n<<13,t^=t<<17,n^=n>>>15,t^=t>>>12,n=i[o]=n^t,e.i=o,n+(r^r>>>16)|0},function(t,e){var n,r,i,o,s,a=[],u=128;for(e===(0|e)?(r=e,e=null):(e+="\0",r=0,u=Math.max(u,e.length)),i=0,o=-32;o<u;++o)e&&(r^=e.charCodeAt((o+32)%e.length)),0===o&&(s=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(s=s+1640531527|0,i=0==(n=a[127&o]^=r+s)?i+1:0);for(i>=128&&(a[127&(e&&e.length||0)]=-1),i=127,o=512;o>0;--o)r=a[i+34&127],n=a[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,a[i]=r^n;t.w=s,t.X=a,t.i=i}(e,t)}(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&(r.X&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n(4)&&n(10)?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.xor4096=a}(0,"object"==typeof t&&t,n(4))}).call(this,n(9)(t))},function(t,e,n){(function(t){var r;!function(t,i,o){function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function a(t,e){var n=new function(t){var e=this,n="";e.next=function(){var t=e.b,n=e.c,r=e.d,i=e.a;return t=t<<25^t>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-t|0,e.b=t=t<<20^t>>>12^n,e.c=n=n-r|0,e.d=r<<16^n>>>16^i,e.a=i-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):n+=t;for(var r=0;r<n.length+20;r++)e.b^=0|n.charCodeAt(r),e.next()}(t),r=e&&e.state,i=function(){return(n.next()>>>0)/4294967296};return i.double=function(){do{var t=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},i.int32=n.next,i.quick=i,r&&("object"==typeof r&&s(r,n),i.state=function(){return s(n,{})}),i}i&&i.exports?i.exports=a:n(4)&&n(10)?void 0===(r=function(){return a}.call(e,n,e,i))||(i.exports=r):this.tychei=a}(0,"object"==typeof t&&t,n(4))}).call(this,n(9)(t))},function(t,e,n){var r;!function(i,o){var s,a=this,u=256,h=6,c="random",l=o.pow(u,h),f=o.pow(2,52),d=2*f,p=u-1;function m(t,e,n){var r=[],m=v(function t(e,n){var r,i=[],o=typeof e;if(n&&"object"==o)for(r in e)try{i.push(t(e[r],n-1))}catch(t){}return i.length?i:"string"==o?e:e+"\0"}((e=1==e?{entropy:!0}:e||{}).entropy?[t,g(i)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(u):(t=new Uint8Array(u),(a.crypto||a.msCrypto).getRandomValues(t)),g(t)}catch(t){var e=a.navigator,n=e&&e.plugins;return[+new Date,a,n,a.screen,g(i)]}}():t,3),r),x=new function(t){var e,n=t.length,r=this,i=0,o=r.i=r.j=0,s=r.S=[];for(n||(t=[n++]);i<u;)s[i]=i++;for(i=0;i<u;i++)s[i]=s[o=p&o+t[i%n]+(e=s[i])],s[o]=e;(r.g=function(t){for(var e,n=0,i=r.i,o=r.j,s=r.S;t--;)e=s[i=p&i+1],n=n*u+s[p&(s[i]=s[o=p&o+e])+(s[o]=e)];return r.i=i,r.j=o,n})(u)}(r),b=function(){for(var t=x.g(h),e=l,n=0;t<f;)t=(t+n)*u,e*=u,n=x.g(1);for(;t>=d;)t/=2,e/=2,n>>>=1;return(t+n)/e};return b.int32=function(){return 0|x.g(4)},b.quick=function(){return x.g(4)/4294967296},b.double=b,v(g(x.S),i),(e.pass||n||function(t,e,n,r){return r&&(r.S&&y(r,x),t.state=function(){return y(x,{})}),n?(o[c]=t,e):t})(b,m,"global"in e?e.global:this==o,e.state)}function y(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function v(t,e){for(var n,r=t+"",i=0;i<r.length;)e[p&i]=p&(n^=19*e[p&i])+r.charCodeAt(i++);return g(e)}function g(t){return String.fromCharCode.apply(0,t)}if(o["seed"+c]=m,v(o.random(),i),"object"==typeof t&&t.exports){t.exports=m;try{s=n(33)}catch(t){}}else void 0===(r=function(){return m}.call(e,n,e,t))||(t.exports=r)}([],Math)},function(t,e){},function(t,e,n){var r;!function(){"use strict";var i=.5*(Math.sqrt(3)-1),o=(3-Math.sqrt(3))/6,s=1/6,a=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;function h(t){var e;e="function"==typeof t?t:t?function(){var t=0,e=0,n=0,r=1,i=function(){var t=4022871197;return function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)}}();t=i(" "),e=i(" "),n=i(" ");for(var o=0;o<arguments.length;o++)(t-=i(arguments[o]))<0&&(t+=1),(e-=i(arguments[o]))<0&&(e+=1),(n-=i(arguments[o]))<0&&(n+=1);return i=null,function(){var i=2091639*t+2.3283064365386963e-10*r;return t=e,e=n,n=i-(r=0|i)}}(t):Math.random,this.p=c(e),this.perm=new Uint8Array(512),this.permMod12=new Uint8Array(512);for(var n=0;n<512;n++)this.perm[n]=this.p[255&n],this.permMod12[n]=this.perm[n]%12}function c(t){var e,n=new Uint8Array(256);for(e=0;e<256;e++)n[e]=e;for(e=0;e<255;e++){var r=e+~~(t()*(256-e)),i=n[e];n[e]=n[r],n[r]=i}return n}h.prototype={grad3:new Float32Array([1,1,0,-1,1,0,1,-1,0,-1,-1,0,1,0,1,-1,0,1,1,0,-1,-1,0,-1,0,1,1,0,-1,1,0,1,-1,0,-1,-1]),grad4:new Float32Array([0,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,1,0,1,1,1,0,1,-1,1,0,-1,1,1,0,-1,-1,-1,0,1,1,-1,0,1,-1,-1,0,-1,1,-1,0,-1,-1,1,1,0,1,1,1,0,-1,1,-1,0,1,1,-1,0,-1,-1,1,0,1,-1,1,0,-1,-1,-1,0,1,-1,-1,0,-1,1,1,1,0,1,1,-1,0,1,-1,1,0,1,-1,-1,0,-1,1,1,0,-1,1,-1,0,-1,-1,1,0,-1,-1,-1,0]),noise2D:function(t,e){var n,r,s=this.permMod12,a=this.perm,u=this.grad3,h=0,c=0,l=0,f=(t+e)*i,d=Math.floor(t+f),p=Math.floor(e+f),m=(d+p)*o,y=t-(d-m),v=e-(p-m);y>v?(n=1,r=0):(n=0,r=1);var g=y-n+o,x=v-r+o,b=y-1+2*o,w=v-1+2*o,_=255&d,M=255&p,z=.5-y*y-v*v;if(z>=0){var k=3*s[_+a[M]];h=(z*=z)*z*(u[k]*y+u[k+1]*v)}var S=.5-g*g-x*x;if(S>=0){var E=3*s[_+n+a[M+r]];c=(S*=S)*S*(u[E]*g+u[E+1]*x)}var A=.5-b*b-w*w;if(A>=0){var N=3*s[_+1+a[M+1]];l=(A*=A)*A*(u[N]*b+u[N+1]*w)}return 70*(h+c+l)},noise3D:function(t,e,n){var r,i,o,a,u,h,c,l,f,d,p=this.permMod12,m=this.perm,y=this.grad3,v=(t+e+n)*(1/3),g=Math.floor(t+v),x=Math.floor(e+v),b=Math.floor(n+v),w=(g+x+b)*s,_=t-(g-w),M=e-(x-w),z=n-(b-w);_>=M?M>=z?(u=1,h=0,c=0,l=1,f=1,d=0):_>=z?(u=1,h=0,c=0,l=1,f=0,d=1):(u=0,h=0,c=1,l=1,f=0,d=1):M<z?(u=0,h=0,c=1,l=0,f=1,d=1):_<z?(u=0,h=1,c=0,l=0,f=1,d=1):(u=0,h=1,c=0,l=1,f=1,d=0);var k=_-u+s,S=M-h+s,E=z-c+s,A=_-l+2*s,N=M-f+2*s,T=z-d+2*s,C=_-1+.5,O=M-1+.5,j=z-1+.5,U=255&g,B=255&x,P=255&b,I=.6-_*_-M*M-z*z;if(I<0)r=0;else{var D=3*p[U+m[B+m[P]]];r=(I*=I)*I*(y[D]*_+y[D+1]*M+y[D+2]*z)}var V=.6-k*k-S*S-E*E;if(V<0)i=0;else{var F=3*p[U+u+m[B+h+m[P+c]]];i=(V*=V)*V*(y[F]*k+y[F+1]*S+y[F+2]*E)}var R=.6-A*A-N*N-T*T;if(R<0)o=0;else{var q=3*p[U+l+m[B+f+m[P+d]]];o=(R*=R)*R*(y[q]*A+y[q+1]*N+y[q+2]*T)}var G=.6-C*C-O*O-j*j;if(G<0)a=0;else{var H=3*p[U+1+m[B+1+m[P+1]]];a=(G*=G)*G*(y[H]*C+y[H+1]*O+y[H+2]*j)}return 32*(r+i+o+a)},noise4D:function(t,e,n,r){var i,o,s,h,c,l,f,d,p,m,y,v,g,x,b,w,_,M=this.perm,z=this.grad4,k=(t+e+n+r)*a,S=Math.floor(t+k),E=Math.floor(e+k),A=Math.floor(n+k),N=Math.floor(r+k),T=(S+E+A+N)*u,C=t-(S-T),O=e-(E-T),j=n-(A-T),U=r-(N-T),B=0,P=0,I=0,D=0;C>O?B++:P++,C>j?B++:I++,C>U?B++:D++,O>j?P++:I++,O>U?P++:D++,j>U?I++:D++;var V=C-(l=B>=3?1:0)+u,F=O-(f=P>=3?1:0)+u,R=j-(d=I>=3?1:0)+u,q=U-(p=D>=3?1:0)+u,G=C-(m=B>=2?1:0)+2*u,H=O-(y=P>=2?1:0)+2*u,K=j-(v=I>=2?1:0)+2*u,W=U-(g=D>=2?1:0)+2*u,L=C-(x=B>=1?1:0)+3*u,X=O-(b=P>=1?1:0)+3*u,Z=j-(w=I>=1?1:0)+3*u,Y=U-(_=D>=1?1:0)+3*u,Q=C-1+4*u,J=O-1+4*u,$=j-1+4*u,tt=U-1+4*u,et=255&S,nt=255&E,rt=255&A,it=255&N,ot=.6-C*C-O*O-j*j-U*U;if(ot<0)i=0;else{var st=M[et+M[nt+M[rt+M[it]]]]%32*4;i=(ot*=ot)*ot*(z[st]*C+z[st+1]*O+z[st+2]*j+z[st+3]*U)}var at=.6-V*V-F*F-R*R-q*q;if(at<0)o=0;else{var ut=M[et+l+M[nt+f+M[rt+d+M[it+p]]]]%32*4;o=(at*=at)*at*(z[ut]*V+z[ut+1]*F+z[ut+2]*R+z[ut+3]*q)}var ht=.6-G*G-H*H-K*K-W*W;if(ht<0)s=0;else{var ct=M[et+m+M[nt+y+M[rt+v+M[it+g]]]]%32*4;s=(ht*=ht)*ht*(z[ct]*G+z[ct+1]*H+z[ct+2]*K+z[ct+3]*W)}var lt=.6-L*L-X*X-Z*Z-Y*Y;if(lt<0)h=0;else{var ft=M[et+x+M[nt+b+M[rt+w+M[it+_]]]]%32*4;h=(lt*=lt)*lt*(z[ft]*L+z[ft+1]*X+z[ft+2]*Z+z[ft+3]*Y)}var dt=.6-Q*Q-J*J-$*$-tt*tt;if(dt<0)c=0;else{var pt=M[et+1+M[nt+1+M[rt+1+M[it+1]]]]%32*4;c=(dt*=dt)*dt*(z[pt]*Q+z[pt+1]*J+z[pt+2]*$+z[pt+3]*tt)}return 27*(i+o+s+h+c)}},h._buildPermutationTable=c,void 0===(r=function(){return h}.call(e,n,e,t))||(t.exports=r),e.SimplexNoise=h,t.exports=h}()},function(t,e){var n=4,r=.001,i=1e-7,o=10,s=11,a=1/(s-1),u="function"==typeof Float32Array;function h(t,e){return 1-3*e+3*t}function c(t,e){return 3*e-6*t}function l(t){return 3*t}function f(t,e,n){return((h(e,n)*t+c(e,n))*t+l(e))*t}function d(t,e,n){return 3*h(e,n)*t*t+2*c(e,n)*t+l(e)}function p(t){return t}t.exports=function(t,e,h,c){if(!(0<=t&&t<=1&&0<=h&&h<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&h===c)return p;for(var l=u?new Float32Array(s):new Array(s),m=0;m<s;++m)l[m]=f(m*a,t,h);function y(e){for(var u=0,c=1,p=s-1;c!==p&&l[c]<=e;++c)u+=a;var m=u+(e-l[--c])/(l[c+1]-l[c])*a,y=d(m,t,h);return y>=r?function(t,e,r,i){for(var o=0;o<n;++o){var s=d(e,r,i);if(0===s)return e;e-=(f(e,r,i)-t)/s}return e}(e,m,t,h):0===y?m:function(t,e,n,r,s){var a,u,h=0;do{(a=f(u=e+(n-e)/2,r,s)-t)>0?n=u:e=u}while(Math.abs(a)>i&&++h<o);return u}(e,u,u+a,t,h)}return function(t){return 0===t?0:1===t?1:f(y(t),e,c)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=n(37),i=n(17),o=[{d:.3,c:3367874},{d:.35,c:3630791},{d:.4,c:13685120},{d:.55,c:5740312},{d:.6,c:4155925},{d:.7,c:6112318},{d:.9,c:5061434},{d:100,c:16776959}],s=function(t){for(var e=0;e<o.length;e++){var n=o[e],r=n.d,i=n.c;if(t<=r)return i}return 0};e.default=function(t){for(var e=new Uint32Array((i.CHUNK_SEGMENTS-1)*(i.CHUNK_SEGMENTS-1)*2),n=0;n<i.CHUNK_SEGMENTS-1;n++)for(var o=0;o<i.CHUNK_SEGMENTS-1;o++){var a=t[n*i.CHUNK_SEGMENTS+o],u=t[n*i.CHUNK_SEGMENTS+o+1],h=t[(n+1)*i.CHUNK_SEGMENTS+o],c=t[(n+1)*i.CHUNK_SEGMENTS+o+1],l=2*n*(i.CHUNK_SEGMENTS-1)+2*o;e[l]=e[l+1]=s((0,r.mean)([u,c,h,a]))}return e}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.clamp=e.mean=e.inverseLerp=e.lerp=e.lerp2=void 0;var r=function(t,e,n){return Math.round(t+n*(e-t))};e.lerp2=r,e.lerp=function(t,e){for(var n=1/t.length,i=0,o=n;i<t.length-1;i++,o+=n)if(e<=o)return r(t[i],t[i+1],(o-n-e)/n);return t[t.length-1]},e.inverseLerp=function(t,e,n){return(n-t)/(e-t)},e.mean=function(t){return t.reduce(function(t,e){return t+e},0)/t.length},e.clamp=function(t,e,n){return t<e?e:t>n?n:t}},function(t,e,n){"use strict";n.r(e);var r=n(11),i=n(12),o=n(0);function s(t,e,n,r,s,a){this.a=t,this.b=e,this.c=n,this.normal=r&&r.isVector3?r:new o.a,this.vertexNormals=Array.isArray(r)?r:[],this.color=s&&s.isColor?s:new i.a,this.vertexColors=Array.isArray(s)?s:[],this.materialIndex=void 0!==a?a:0}Object.assign(s.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}});var a=n(8),u=n(13),h=n(7),c=n(1),l=n(6),f=n(15),d=n(3),p=0;function m(){Object.defineProperty(this,"id",{value:p+=2}),this.uuid=d.a.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}m.prototype=Object.assign(Object.create(r.a.prototype),{constructor:m,isGeometry:!0,applyMatrix:function(t){for(var e=(new a.a).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++)this.vertices[n].applyMatrix4(t);for(n=0,r=this.faces.length;n<r;n++){var i=this.faces[n];i.normal.applyMatrix3(e).normalize();for(var o=0,s=i.vertexNormals.length;o<s;o++)i.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new c.a;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new c.a;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new c.a;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new c.a;return function(e,n,r){return t.makeTranslation(e,n,r),this.applyMatrix(t),this}}(),scale:function(){var t=new c.a;return function(e,n,r){return t.makeScale(e,n,r),this.applyMatrix(t),this}}(),lookAt:function(){var t=new f.a;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,r=t.attributes,a=r.position.array,u=void 0!==r.normal?r.normal.array:void 0,h=void 0!==r.color?r.color.array:void 0,c=void 0!==r.uv?r.uv.array:void 0,f=void 0!==r.uv2?r.uv2.array:void 0;void 0!==f&&(this.faceVertexUvs[1]=[]);for(var d=[],p=[],m=[],y=0,v=0;y<a.length;y+=3,v+=2)e.vertices.push(new o.a(a[y],a[y+1],a[y+2])),void 0!==u&&d.push(new o.a(u[y],u[y+1],u[y+2])),void 0!==h&&e.colors.push(new i.a(h[y],h[y+1],h[y+2])),void 0!==c&&p.push(new l.a(c[v],c[v+1])),void 0!==f&&m.push(new l.a(f[v],f[v+1]));function g(t,n,r,i){var o=new s(t,n,r,void 0!==u?[d[t].clone(),d[n].clone(),d[r].clone()]:[],void 0!==h?[e.colors[t].clone(),e.colors[n].clone(),e.colors[r].clone()]:[],i);e.faces.push(o),void 0!==c&&e.faceVertexUvs[0].push([p[t].clone(),p[n].clone(),p[r].clone()]),void 0!==f&&e.faceVertexUvs[1].push([m[t].clone(),m[n].clone(),m[r].clone()])}var x=t.groups;if(x.length>0)for(y=0;y<x.length;y++)for(var b=x[y],w=b.start,_=(v=w,w+b.count);v<_;v+=3)void 0!==n?g(n[v],n[v+1],n[v+2],b.materialIndex):g(v,v+1,v+2,b.materialIndex);else if(void 0!==n)for(y=0;y<n.length;y+=3)g(n[y],n[y+1],n[y+2]);else for(y=0;y<a.length/3;y+=3)g(y,y+1,y+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new o.a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,r=new c.a;return r.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(r),this},computeFaceNormals:function(){for(var t=new o.a,e=new o.a,n=0,r=this.faces.length;n<r;n++){var i=this.faces[n],s=this.vertices[i.a],a=this.vertices[i.b],u=this.vertices[i.c];t.subVectors(u,a),e.subVectors(s,a),t.cross(e),t.normalize(),i.normal.copy(t)}},computeVertexNormals:function(t){var e,n,r,i,s,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new o.a;if(t){var u,h,c,l=new o.a,f=new o.a;for(r=0,i=this.faces.length;r<i;r++)s=this.faces[r],u=this.vertices[s.a],h=this.vertices[s.b],c=this.vertices[s.c],l.subVectors(c,h),f.subVectors(u,h),l.cross(f),a[s.a].add(l),a[s.b].add(l),a[s.c].add(l)}else for(this.computeFaceNormals(),r=0,i=this.faces.length;r<i;r++)a[(s=this.faces[r]).a].add(s.normal),a[s.b].add(s.normal),a[s.c].add(s.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(r=0,i=this.faces.length;r<i;r++){var d=(s=this.faces[r]).vertexNormals;3===d.length?(d[0].copy(a[s.a]),d[1].copy(a[s.b]),d[2].copy(a[s.c])):(d[0]=a[s.a].clone(),d[1]=a[s.b].clone(),d[2]=a[s.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){var r=(n=this.faces[t]).vertexNormals;3===r.length?(r[0].copy(n.normal),r[1].copy(n.normal),r[2].copy(n.normal)):(r[0]=n.normal.clone(),r[1]=n.normal.clone(),r[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,r,i;for(n=0,r=this.faces.length;n<r;n++)for((i=this.faces[n]).__originalFaceNormal?i.__originalFaceNormal.copy(i.normal):i.__originalFaceNormal=i.normal.clone(),i.__originalVertexNormals||(i.__originalVertexNormals=[]),t=0,e=i.vertexNormals.length;t<e;t++)i.__originalVertexNormals[t]?i.__originalVertexNormals[t].copy(i.vertexNormals[t]):i.__originalVertexNormals[t]=i.vertexNormals[t].clone();var s=new m;for(s.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,u=this.morphNormals[t].vertexNormals;for(n=0,r=this.faces.length;n<r;n++)h=new o.a,c={a:new o.a,b:new o.a,c:new o.a},a.push(h),u.push(c)}var h,c,l=this.morphNormals[t];for(s.vertices=this.morphTargets[t].vertices,s.computeFaceNormals(),s.computeVertexNormals(),n=0,r=this.faces.length;n<r;n++)i=this.faces[n],h=l.faceNormals[n],c=l.vertexNormals[n],h.copy(i.normal),c.a.copy(i.vertexNormals[0]),c.b.copy(i.vertexNormals[1]),c.c.copy(i.vertexNormals[2])}for(n=0,r=this.faces.length;n<r;n++)(i=this.faces[n]).normal=i.__originalFaceNormal,i.vertexNormals=i.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new h.a),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new u.a),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,i=this.vertices.length,o=this.vertices,u=t.vertices,h=this.faces,c=t.faces,l=this.faceVertexUvs[0],f=t.faceVertexUvs[0],d=this.colors,p=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new a.a).getNormalMatrix(e));for(var m=0,y=u.length;m<y;m++){var v=u[m].clone();void 0!==e&&v.applyMatrix4(e),o.push(v)}for(m=0,y=p.length;m<y;m++)d.push(p[m].clone());for(m=0,y=c.length;m<y;m++){var g,x,b,w=c[m],_=w.vertexNormals,M=w.vertexColors;(g=new s(w.a+i,w.b+i,w.c+i)).normal.copy(w.normal),void 0!==r&&g.normal.applyMatrix3(r).normalize();for(var z=0,k=_.length;z<k;z++)x=_[z].clone(),void 0!==r&&x.applyMatrix3(r).normalize(),g.vertexNormals.push(x);for(g.color.copy(w.color),z=0,k=M.length;z<k;z++)b=M[z],g.vertexColors.push(b.clone());g.materialIndex=w.materialIndex+n,h.push(g)}for(m=0,y=f.length;m<y;m++){var S=f[m],E=[];if(void 0!==S){for(z=0,k=S.length;z<k;z++)E.push(S[z].clone());l.push(E)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,r,i,o,s,a,u={},h=[],c=[],l=Math.pow(10,4);for(n=0,r=this.vertices.length;n<r;n++)t=this.vertices[n],void 0===u[e=Math.round(t.x*l)+"_"+Math.round(t.y*l)+"_"+Math.round(t.z*l)]?(u[e]=n,h.push(this.vertices[n]),c[n]=h.length-1):c[n]=c[u[e]];var f=[];for(n=0,r=this.faces.length;n<r;n++){(i=this.faces[n]).a=c[i.a],i.b=c[i.b],i.c=c[i.c],o=[i.a,i.b,i.c];for(var d=0;d<3;d++)if(o[d]===o[(d+1)%3]){f.push(n);break}}for(n=f.length-1;n>=0;n--){var p=f[n];for(this.faces.splice(p,1),s=0,a=this.faceVertexUvs.length;s<a;s++)this.faceVertexUvs[s].splice(p,1)}var m=this.vertices.length-h.length;return this.vertices=h,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var r=t[e];this.vertices.push(new o.a(r.x,r.y,r.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var r,i,o=this.faceVertexUvs[0],s=this.faceVertexUvs[1];for(o&&o.length===e&&(r=[]),s&&s.length===e&&(i=[]),n=0;n<e;n++){var a=t[n]._id;r&&r.push(o[a]),i&&i.push(s[a])}r&&(this.faceVertexUvs[0]=r),i&&(this.faceVertexUvs[1]=i)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var r=[],i=0;i<this.vertices.length;i++){var o=this.vertices[i];r.push(o.x,o.y,o.z)}var s=[],a=[],u={},h=[],c={},l=[],f={};for(i=0;i<this.faces.length;i++){var d=this.faces[i],p=void 0!==this.faceVertexUvs[0][i],m=d.normal.length()>0,y=d.vertexNormals.length>0,v=1!==d.color.r||1!==d.color.g||1!==d.color.b,g=d.vertexColors.length>0,x=0;if(x=M(x=M(x=M(x=M(x=M(x=M(x=M(x=M(x,0,0),1,!0),2,!1),3,p),4,m),5,y),6,v),7,g),s.push(x),s.push(d.a,d.b,d.c),s.push(d.materialIndex),p){var b=this.faceVertexUvs[0][i];s.push(S(b[0]),S(b[1]),S(b[2]))}if(m&&s.push(z(d.normal)),y){var w=d.vertexNormals;s.push(z(w[0]),z(w[1]),z(w[2]))}if(v&&s.push(k(d.color)),g){var _=d.vertexColors;s.push(k(_[0]),k(_[1]),k(_[2]))}}function M(t,e,n){return n?t|1<<e:t&~(1<<e)}function z(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==u[e]?u[e]:(u[e]=a.length/3,a.push(t.x,t.y,t.z),u[e])}function k(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==c[e]?c[e]:(c[e]=h.length,h.push(t.getHex()),c[e])}function S(t){var e=t.x.toString()+t.y.toString();return void 0!==f[e]?f[e]:(f[e]=l.length/2,l.push(t.x,t.y),f[e])}return t.data={},t.data.vertices=r,t.data.normals=a,h.length>0&&(t.data.colors=h),l.length>0&&(t.data.uvs=[l]),t.data.faces=s,t},clone:function(){return(new m).copy(this)},copy:function(t){var e,n,r,i,o,s;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var a=t.vertices;for(e=0,n=a.length;e<n;e++)this.vertices.push(a[e].clone());var u=t.colors;for(e=0,n=u.length;e<n;e++)this.colors.push(u[e].clone());var h=t.faces;for(e=0,n=h.length;e<n;e++)this.faces.push(h[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var c=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),r=0,i=c.length;r<i;r++){var l=c[r],f=[];for(o=0,s=l.length;o<s;o++){var d=l[o];f.push(d.clone())}this.faceVertexUvs[e].push(f)}}var p=t.morphTargets;for(e=0,n=p.length;e<n;e++){var m={};if(m.name=p[e].name,void 0!==p[e].vertices)for(m.vertices=[],r=0,i=p[e].vertices.length;r<i;r++)m.vertices.push(p[e].vertices[r].clone());if(void 0!==p[e].normals)for(m.normals=[],r=0,i=p[e].normals.length;r<i;r++)m.normals.push(p[e].normals[r].clone());this.morphTargets.push(m)}var y=t.morphNormals;for(e=0,n=y.length;e<n;e++){var v={};if(void 0!==y[e].vertexNormals)for(v.vertexNormals=[],r=0,i=y[e].vertexNormals.length;r<i;r++){var g=y[e].vertexNormals[r],x={};x.a=g.a.clone(),x.b=g.b.clone(),x.c=g.c.clone(),v.vertexNormals.push(x)}if(void 0!==y[e].faceNormals)for(v.faceNormals=[],r=0,i=y[e].faceNormals.length;r<i;r++)v.faceNormals.push(y[e].faceNormals[r].clone());this.morphNormals.push(v)}var b=t.skinWeights;for(e=0,n=b.length;e<n;e++)this.skinWeights.push(b[e].clone());var w=t.skinIndices;for(e=0,n=w.length;e<n;e++)this.skinIndices.push(w[e].clone());var _=t.lineDistances;for(e=0,n=_.length;e<n;e++)this.lineDistances.push(_[e]);var M=t.boundingBox;null!==M&&(this.boundingBox=M.clone());var z=t.boundingSphere;return null!==z&&(this.boundingSphere=z.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var y=n(14),v=n(2);function g(t,e,n,r){m.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r},this.fromBufferGeometry(new x(t,e,n,r)),this.mergeVertices()}function x(t,e,n,r){y.BufferGeometry.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};var i,o,s=(t=t||1)/2,a=(e=e||1)/2,u=Math.floor(n)||1,h=Math.floor(r)||1,c=u+1,l=h+1,f=t/u,d=e/h,p=[],m=[],g=[],x=[];for(o=0;o<l;o++){var b=o*d-a;for(i=0;i<c;i++){var w=i*f-s;m.push(w,-b,0),g.push(0,0,1),x.push(i/u),x.push(1-o/h)}}for(o=0;o<h;o++)for(i=0;i<u;i++){var _=i+c*o,M=i+c*(o+1),z=i+1+c*(o+1),k=i+1+c*o;p.push(_,M,k),p.push(M,z,k)}this.setIndex(p),this.addAttribute("position",new v.b(m,3)),this.addAttribute("normal",new v.b(g,3)),this.addAttribute("uv",new v.b(x,2))}n.d(e,"PlaneGeometry",function(){return g}),n.d(e,"PlaneBufferGeometry",function(){return x}),g.prototype=Object.create(m.prototype),g.prototype.constructor=g,x.prototype=Object.create(y.BufferGeometry.prototype),x.prototype.constructor=x}]);